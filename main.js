(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var o=e.g.document;if(!t&&o&&(o.currentScript&&(t=o.currentScript.src),!t)){var n=o.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"1f757ac1762962d60ddc.png",o=e.p+"d367d5dbff6ca8e7e2f2.png",n=e.p+"df3b5dddd60da7069980.png",c=e.p+"fe50e1a3f0405d606b0c.png",s=e.p+"cfabfc38136dc55a9a0d.png",r=[],l=()=>{const e=document.querySelector(".tasks"),t=document.querySelector(".bg-image");e.childElementCount>1?t.src=c:1===e.childElementCount&&(t.src=s)},d=class{constructor(e,t,o,n,c){this.project=e,this.title=t,this.date=o,this.type=n,this.status=c}addingNewTask(){const e=document.querySelector(".tasks"),t=document.createElement("div");t.classList.add("task");const c=document.createElement("p");c.textContent=this.title;const s=document.createElement("p");s.textContent=this.date;const d=document.createElement("p");d.textContent=this.type;const a=document.createElement("div");a.classList.add("task-option");const i=new Image;i.src=n;const u=new Image;u.src=o,"complete"===this.status&&t.classList.add("complete"),e.appendChild(t),t.appendChild(c),t.appendChild(s),t.appendChild(d),t.appendChild(a),a.appendChild(i),a.appendChild(u),l(),i.addEventListener("click",(()=>{const e=i.parentNode.parentNode.children[0].textContent;for(let t=0;t<r.length;t+=1)e===r[t].title&&("complete"===r[t].status?r[t].status="incomplete":"incomplete"===r[t].status&&(r[t].status="complete"));i.parentNode.parentNode.classList.toggle("complete")})),u.addEventListener("click",(()=>{const e=u.parentNode.parentNode.children[0].textContent;for(let t=0;t<r.length;t+=1)e===r[t].title&&r.splice(t,1);u.parentNode.parentNode.remove(),l()}))}},a=document.querySelector(".new-project"),i=document.querySelector(".project-form"),u=document.querySelector(".add-button"),m=document.querySelector(".new-projects"),p=document.querySelector(".cancle-button"),h=document.querySelector(".tasks"),g=()=>{for(;h.childElementCount>1;)h.lastChild.remove();const e=document.querySelector(".task-list").children[0].textContent;for(let t=0;t<r.length;t+=1)e===r[t].project&&new d(r[t].project,r[t].title,r[t].date,r[t].type,r[t].status).addingNewTask();l()},v=()=>{const e=document.querySelectorAll("#project"),t=document.querySelector(".task-list");e.forEach((e=>{e.addEventListener("click",(()=>{if(t.childNodes[1].textContent===e.textContent)return!1;t.childNodes[1].textContent=e.textContent,g()}))}))};(()=>{const e=document.querySelector(".menu"),t=document.querySelector(".projects"),o=document.querySelector(".task-list"),n=document.querySelector(".tasks"),c=document.querySelector(".task"),s=document.querySelector(".add-task"),r=document.querySelector(".vertical"),l=document.querySelector(".horizontol"),d=document.querySelector(".add-task-form");o.children[0].textContent="Casual",e.addEventListener("click",(()=>{m.childElementCount>2&&document.querySelectorAll(".new-project-title").forEach((e=>{e.classList.toggle("show")})),e.classList.toggle("change"),t.classList.toggle("show"),o.classList.toggle("show"),d.classList.toggle("show"),i.classList.remove("show"),n.classList.toggle("show"),c.classList.toggle("show")})),s.addEventListener("click",(()=>{r.classList.toggle("adding"),l.classList.toggle("adding"),d.classList.toggle("adding"),e.parentNode.parentNode.classList.add("show"),document.querySelector(".form-date").value=(new Date).toJSON().slice(0,10)}))})(),v(),a.addEventListener("click",(()=>{i.classList.add("show")})),u.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".projectAddPopup"),n=document.createElement("div");n.classList.add("new-project-title"),m.insertBefore(n,m.children[m.childElementCount-1]);const c=new Image;c.src=t,n.appendChild(c);const s=document.createElement("button");s.id="project",s.textContent=e.value,n.appendChild(s),e.value="",i.classList.remove("show");const l=new Image;l.src=o,n.appendChild(l),l.addEventListener("click",(()=>{const e=l.parentNode.children[1].textContent,t=document.querySelector(".task-list");if(1===h.childElementCount)l.parentNode.remove(),t.childNodes[1].textContent="Casual",g();else{for(let t=0;t<=r.length;t+=1)e===r[t].project&&r.splice(t,1);l.parentNode.remove(),t.childNodes[1].textContent="Casual",g()}})),console.log(r),v()})()})),p.addEventListener("click",(e=>{const t=document.querySelector(".projectAddPopup");e.preventDefault(),i.classList.remove("show"),t.value=""})),(()=>{const e=document.querySelector(".add-task-button"),t=document.querySelector(".cancel-task-button"),o=document.querySelector(".vertical"),n=document.querySelector(".horizontol");e.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".form-name"),t=document.querySelector(".form-date"),o=document.querySelector(".form-type"),n=document.querySelector(".task-list").children[0].textContent,c=e.value,s=t.value,l=o.value,a=document.querySelector(".add-task-form"),i=new d(n,c,s,l,"incomplete");i.addingNewTask(),r.push(i),e.value="",t.value=(new Date).toJSON().slice(0,10),o.value="Normal",a.classList.remove("adding")})(),o.classList.remove("adding"),n.classList.remove("adding"),document.querySelector(".main-container").classList.remove("show")})),t.addEventListener("click",(e=>{e.preventDefault(),o.classList.remove("adding"),n.classList.remove("adding"),document.querySelector(".main-container").classList.remove("show"),t.parentNode.parentNode.parentNode.classList.remove("adding")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0IsT0FBTyxRQUM1QjBDLEVBQTJCLFdBQVksV0FBWSxXQUFFNUQsVUFBVWtCLE9BQU8sU0FBUyxHQUNyRixFRy9JTG9ELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvdGFza0FkZC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9tb2R1bGVzL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy9pbml0aWFsRE9NLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiaW1wb3J0IGNpcmNsZSBmcm9tIFwiLi9pbWFnZXMvY2lyY2VsLnBuZ1wiO1xyXG5pbXBvcnQgY3Jvc3MgZnJvbSBcIi4vaW1hZ2VzL2Nyb3NzLnBuZ1wiO1xyXG5pbXBvcnQgYmdJY29uQWZ0ZXIgZnJvbSBcIi4vaW1hZ2VzL3Rhc2stYXJlYS1pbWFnZS1hZnRlci5wbmdcIjtcclxuaW1wb3J0IGJnSWNvbkJlZm9yZSBmcm9tIFwiLi9pbWFnZXMvdGFzay1hcmVhLWltYWdlLnBuZ1wiO1xyXG5cclxuLy8gY29uc3QgcHJvamVjdHNPYmplY3QgPSB7fTtcclxuY29uc3QgcHJvamVjdHNBcnJheSA9IFtdO1xyXG5jb25zdCBjaGVja1Rhc2tFeGlzdHMgPSAoKT0+e1xyXG4gICAgY29uc3QgdGFza3NTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuICAgIGNvbnN0IGJnSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJnLWltYWdlXCIpO1xyXG4gICAgaWYodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50ID4gMSl7Ly8gY2hlY2sgaWYgdGhlcmUgYXJlIGFueSB0YXNrXHJcbiAgICAgICAgYmdJbWFnZS5zcmMgPSBiZ0ljb25BZnRlcjsvLyBjaG5hZ2VzIGJnIGltYWdlXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRhc2tzU2VjdGlvbi5jaGlsZEVsZW1lbnRDb3VudCA9PT0gMSl7XHJcbiAgICAgICAgYmdJbWFnZS5zcmMgPSBiZ0ljb25CZWZvcmU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IFRhc2sgPSBjbGFzc3svLyBjb25zdHJ1Y3RvciBmb3IgY29sbGVjdGluZyBuZXdUYXNrIGluZm9cclxuICAgIGNvbnN0cnVjdG9yKHByb2plY3QsdGl0bGUsIGRhdGUsIHR5cGUsIHN0YXR1cyl7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdFxyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLmRhdGUgPSBkYXRlO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFkZGluZ05ld1Rhc2soKXsvLyBjcmVhdGVzIGFuZCBhcHBlbmRzIG5ldyB0YXNrIFxyXG4gICAgICAgIGNvbnN0IHRhc2tzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld1Rhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG5ld1Rhc2tEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhc2tOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgdGFza05hbWUudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlO1xyXG5cclxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgICAgIHRhc2tEYXRlLnRleHRDb250ZW50ID0gdGhpcy5kYXRlO1xyXG5cclxuICAgICAgICBjb25zdCB0YXNrU3RhdHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgdGFza1N0YXR1cy50ZXh0Q29udGVudCA9IHRoaXMudHlwZTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFza0J1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRhc2tCdXR0b25zLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLW9wdGlvblwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgZG9uZUljb24gPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBkb25lSWNvbi5zcmMgPSBjaXJjbGU7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUljb24gPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICBkZWxldGVJY29uLnNyYyA9IGNyb3NzO1xyXG5cclxuICAgICAgICBpZih0aGlzLnN0YXR1cyA9PT0gXCJjb21wbGV0ZVwiKXtcclxuICAgICAgICAgICAgbmV3VGFza0Rpdi5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0YXNrc1NlY3Rpb24uYXBwZW5kQ2hpbGQobmV3VGFza0Rpdik7XHJcbiAgICAgICAgbmV3VGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrTmFtZSk7XHJcbiAgICAgICAgbmV3VGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRGF0ZSk7XHJcbiAgICAgICAgbmV3VGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrU3RhdHVzKTtcclxuICAgICAgICBuZXdUYXNrRGl2LmFwcGVuZENoaWxkKHRhc2tCdXR0b25zKTtcclxuICAgICAgICB0YXNrQnV0dG9ucy5hcHBlbmRDaGlsZChkb25lSWNvbik7XHJcbiAgICAgICAgdGFza0J1dHRvbnMuYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbik7XHJcbiAgICAgICAgY2hlY2tUYXNrRXhpc3RzKCk7XHJcblxyXG4gICAgICAgIGRvbmVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRUYXNrVGl0bGUgPSAoKGRvbmVJY29uLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLmNoaWxkcmVuWzBdLnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPTA7IGk8cHJvamVjdHNBcnJheS5sZW5ndGg7aSs9MSl7IC8vIGNobmFnZXMgdGhlIHN0YXR1cyBvZiB0aGUgdGFzayBcclxuICAgICAgICAgICAgICAgIGlmKGNvbXBsZXRlZFRhc2tUaXRsZSA9PT0gcHJvamVjdHNBcnJheVtpXS50aXRsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJvamVjdHNBcnJheVtpXS5zdGF0dXMgPT09IFwiY29tcGxldGVcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RzQXJyYXlbaV0uc3RhdHVzID0gXCJpbmNvbXBsZXRlXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihwcm9qZWN0c0FycmF5W2ldLnN0YXR1cyA9PT0gXCJpbmNvbXBsZXRlXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0c0FycmF5W2ldLnN0YXR1cyA9IFwiY29tcGxldGVcIjtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICgoZG9uZUljb24ucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkuY2xhc3NMaXN0LnRvZ2dsZShcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0c0FycmF5KTsgIFxyXG5cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBkZWxldGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgICAgICBjb25zdCByZW1vdmVkVGFza1RpdGxlID0gKChkZWxldGVJY29uLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLmNoaWxkcmVuWzBdLnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBmb3IobGV0IGk9MDtpPHByb2plY3RzQXJyYXkubGVuZ3RoO2krPTEpey8vIHJlbW92ZXMgdGhlIHRhc2sgZnJvbSB0aGUgbWFpbiBhcnJheVxyXG4gICAgICAgICAgICAgICAgaWYocmVtb3ZlZFRhc2tUaXRsZSA9PT0gcHJvamVjdHNBcnJheVtpXS50aXRsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheS5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0c0FycmF5KTtcclxuICAgICAgICAgICAgKChkZWxldGVJY29uLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBjaGVja1Rhc2tFeGlzdHMoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuY29uc3QgYWRkTmV3VGFzayA9ICgpPT57XHJcbiAgICBjb25zdCB0YXNrRm9ybU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tbmFtZVwiKTtcclxuICAgIGNvbnN0IHRhc2tGb3JtRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1kYXRlXCIpO1xyXG4gICAgY29uc3QgdGFza0Zvcm1UeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLXR5cGVcIik7XHJcbiAgICBjb25zdCB0YXNrUHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbGlzdFwiKS5jaGlsZHJlblswXS50ZXh0Q29udGVudDtcclxuXHJcbiAgICAvLyBnZXRzIHZhbHVlIGZyb20gdGhlIGZvcm1cclxuICAgIGNvbnN0IHRhc2tGb3JtTmFtZVZhbHVlID0gdGFza0Zvcm1OYW1lLnZhbHVlO1xyXG4gICAgY29uc3QgdGFza0Zvcm1EYXRlVmFsdWUgPSB0YXNrRm9ybURhdGUudmFsdWVcclxuICAgIGNvbnN0IHRhc2tGb3JtVHlwZVZhbHVlID0gdGFza0Zvcm1UeXBlLnZhbHVlXHJcbiAgICBjb25zdCBzdGF0dXMgPSBcImluY29tcGxldGVcIjtcclxuICAgIGNvbnN0IGFkZFRhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFzay1mb3JtXCIpO1xyXG4gICAgY29uc3QgbmV3VGFzayA9IG5ldyBUYXNrKHRhc2tQcm9qZWN0TmFtZSAsdGFza0Zvcm1OYW1lVmFsdWUsIHRhc2tGb3JtRGF0ZVZhbHVlLCB0YXNrRm9ybVR5cGVWYWx1ZSwgc3RhdHVzKTtcclxuICAgIG5ld1Rhc2suYWRkaW5nTmV3VGFzaygpOy8vIGNhbGxpbmcgZnVuY3Rpb25cclxuICAgIHByb2plY3RzQXJyYXkucHVzaChuZXdUYXNrKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKG5ld1Rhc2spO1xyXG5cclxuICAgIFxyXG4gICAgLy8gcHJvamVjdHNBcnJheS5wdXNoKHRhc2tUaXRsZS5jaGlsZHJlblswXS50ZXh0Q29udGVudCk7XHJcbiAgICAvLyBjb25zdCB1bmlxdWVQcm9qZWN0cyA9IFsuLi5uZXcgU2V0KHByb2plY3RzQXJyYXkpXTtcclxuICAgIC8vIHByb2plY3RzT2JqZWN0LnRhc2sgPSB1bmlxdWVQcm9qZWN0cztcclxuXHJcbiAgICAvLyByZXNldHRpbmcgZm9ybSB2YWx1ZVxyXG4gICAgdGFza0Zvcm1OYW1lLnZhbHVlID0gXCJcIjtcclxuICAgIHRhc2tGb3JtRGF0ZS52YWx1ZSA9IG5ldyBEYXRlKCkudG9KU09OKCkuc2xpY2UoMCwxMCk7XHJcbiAgICB0YXNrRm9ybVR5cGUudmFsdWUgPSBcIk5vcm1hbFwiO1xyXG4gICAgYWRkVGFza0Zvcm0uY2xhc3NMaXN0LnJlbW92ZShcImFkZGluZ1wiKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RzQXJyYXkpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNPYmplY3QpO1xyXG59XHJcblxyXG5jb25zdCBhZGROZXdUYXNrRXZlbnQgPSAoKT0+e1xyXG4gICAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2stYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgY2FuY2VsVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLXRhc2stYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgYWRkS2V5VmVydGljYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZlcnRpY2FsXCIpO1xyXG4gICAgY29uc3QgYWRkS2V5SG9yaXpvbnRvbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9yaXpvbnRvbFwiKTtcclxuXHJcbiAgICBhZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSk9PntcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgYWRkTmV3VGFzaygpO1xyXG4gICAgICAgIGFkZEtleVZlcnRpY2FsLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7XHJcbiAgICAgICAgYWRkS2V5SG9yaXpvbnRvbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkaW5nXCIpOy8vIGFuaW1hdGlvbiBmb3IgYWRkIGljb24gXHJcbiAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250YWluZXJcIik7XHJcbiAgICAgICAgbWFpbkNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgIH0pXHJcblxyXG4gICAgY2FuY2VsVGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGFkZEtleVZlcnRpY2FsLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7XHJcbiAgICAgICAgYWRkS2V5SG9yaXpvbnRvbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkaW5nXCIpOy8vIGFuaW1hdGlvbiBmb3IgYWRkIGljb24gXHJcbiAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250YWluZXJcIik7XHJcbiAgICAgICAgbWFpbkNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgICAgICAoKChjYW5jZWxUYXNrQnV0dG9uLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7XHJcbiAgICB9KVxyXG59XHJcblxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydFxyXG5leHBvcnQge2FkZE5ld1Rhc2tFdmVudCwgcHJvamVjdHNBcnJheSwgVGFzaywgY2hlY2tUYXNrRXhpc3RzfTsiLCJpbXBvcnQgdGFza0ljb24gZnJvbSBcIi4vaW1hZ2VzL3Rhc2tfRklMTDBfd2dodDQwMF9HUkFEMF9vcHN6NDgucG5nXCI7XHJcbmltcG9ydCBjcm9zc0ljb24gZnJvbSBcIi4vaW1hZ2VzL2Nyb3NzLnBuZ1wiO1xyXG5pbXBvcnQgeyBUYXNrLCBwcm9qZWN0c0FycmF5LCBjaGVja1Rhc2tFeGlzdHMgfSBmcm9tIFwiLi90YXNrQWRkXCI7XHJcblxyXG5jb25zdCBhZGROZXdQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdFwiKTtcclxuY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtZm9ybVwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBuZXdQcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXByb2plY3RzXCIpO1xyXG5jb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNsZS1idXR0b25cIik7XHJcbmNvbnN0IHRhc2tzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIik7XHJcblxyXG5cclxuY29uc3Qgc3RoID0gKCk9PntcclxuICAgIHdoaWxlKHRhc2tzU2VjdGlvbi5jaGlsZEVsZW1lbnRDb3VudD4xKXsvLyByZW1vdmVzIHRoZSBjdXJyZW50IHByb2plY3RzIHRhc2tzIGZvciBuZXcgc2VsZWN0ZWQgcHJvamVjdFxyXG4gICAgICAgIHRhc2tzU2VjdGlvbi5sYXN0Q2hpbGQucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB0YXNrUHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbGlzdFwiKS5jaGlsZHJlblswXS50ZXh0Q29udGVudDtcclxuICAgIGZvcihsZXQgaT0wO2k8cHJvamVjdHNBcnJheS5sZW5ndGg7aSs9MSl7Ly8gdGFza2VzIHZhbHVlIGZyb20gYXJyYXkgYW5kIGFwcGVuZHMgdGhlIHNlbGVjZXRlZCBwcm9qZWN0cyB0YXNrXHJcbiAgICAgICAgaWYodGFza1Byb2plY3ROYW1lID09PSBwcm9qZWN0c0FycmF5W2ldLnByb2plY3Qpe1xyXG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrID0gbmV3IFRhc2socHJvamVjdHNBcnJheVtpXS5wcm9qZWN0LHByb2plY3RzQXJyYXlbaV0udGl0bGUsXHJcbiAgICAgICAgICAgICAgICBwcm9qZWN0c0FycmF5W2ldLmRhdGUscHJvamVjdHNBcnJheVtpXS50eXBlLCBwcm9qZWN0c0FycmF5W2ldLnN0YXR1cyk7XHJcbiAgICAgICAgICAgIG5ld1Rhc2suYWRkaW5nTmV3VGFzaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNoZWNrVGFza0V4aXN0cygpO1xyXG59XHJcblxyXG5jb25zdCBhY2Nlc3NQcm9qZWN0cyA9ICgpPT57IC8vIGFjY2VzcyBuYW1lcyBvZiBwcm9qZWN0c1xyXG4gICAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3Byb2plY3RcIik7XHJcbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbGlzdFwiKTtcclxuICAgIHByb2plY3RzLmZvckVhY2goKHByb2plY3QpPT57XHJcbiAgICAgICAgcHJvamVjdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcclxuICAgICAgICAgICAgaWYocHJvamVjdFRpdGxlLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQgPT09IHByb2plY3QudGV4dENvbnRlbnQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgcHJvamVjdFRpdGxlLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQgPSBwcm9qZWN0LnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBzdGgoKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbmNvbnN0IGFkZFByb2plY3QgPSAoKT0+ey8vIGNyZWF0ZXMgbmV3IHByb2plY3QgZGl2IGFuZCBhcHBlbmRzIGJlZm9yZSB0aGUgYWRkIGJ1dHRvblxyXG4gICAgY29uc3QgbmV3UHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RBZGRQb3B1cFwiKTtcclxuXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIG5ld1Byb2plY3REaXYuY2xhc3NMaXN0LmFkZChcIm5ldy1wcm9qZWN0LXRpdGxlXCIpXHJcbiAgICBuZXdQcm9qZWN0cy5pbnNlcnRCZWZvcmUobmV3UHJvamVjdERpdiwgbmV3UHJvamVjdHMuY2hpbGRyZW5bbmV3UHJvamVjdHMuY2hpbGRFbGVtZW50Q291bnQtMV0pO1xyXG5cclxuICAgIGNvbnN0IG5ld1Byb2plY3RJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgbmV3UHJvamVjdEltYWdlLnNyYyA9IHRhc2tJY29uO1xyXG4gICAgbmV3UHJvamVjdERpdi5hcHBlbmRDaGlsZChuZXdQcm9qZWN0SW1hZ2UpO1xyXG5cclxuICAgIGNvbnN0IG5ld1Byb2plY3RCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgbmV3UHJvamVjdEJ1dHRvbi5pZCA9IFwicHJvamVjdFwiO1xyXG4gICAgbmV3UHJvamVjdEJ1dHRvbi50ZXh0Q29udGVudCA9IG5ld1Byb2plY3ROYW1lLnZhbHVlO1xyXG4gICAgbmV3UHJvamVjdERpdi5hcHBlbmRDaGlsZChuZXdQcm9qZWN0QnV0dG9uKTtcclxuICAgIG5ld1Byb2plY3ROYW1lLnZhbHVlPSBcIlwiO1xyXG4gICAgcHJvamVjdEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcblxyXG4gICAgY29uc3QgY3Jvc3NJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgY3Jvc3NJbWFnZS5zcmMgPSBjcm9zc0ljb247XHJcbiAgICBuZXdQcm9qZWN0RGl2LmFwcGVuZENoaWxkKGNyb3NzSW1hZ2UpO1xyXG5cclxuICAgIGNyb3NzSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgY29uc3QgZGVsZXRlZFByb2plY3ROYW1lID0gKGNyb3NzSW1hZ2UucGFyZW50Tm9kZSkuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWxpc3RcIik7XHJcbiAgICAgICAgaWYodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50ID09PSAxKXtcclxuICAgICAgICAgICAgKGNyb3NzSW1hZ2UucGFyZW50Tm9kZSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHByb2plY3RUaXRsZS5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50ID0gXCJDYXN1YWxcIjtcclxuICAgICAgICAgICAgc3RoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8PXByb2plY3RzQXJyYXkubGVuZ3RoO2krPTEpey8vIHdoZW4gcHJvamVjdCBpcyBkZWxldGVkIHRoZSBwcm9qZWN0J3MgYWxsIHRhc2sgZ2V0cyBkZWxldGVkXHJcbiAgICAgICAgICAgICAgICBpZihkZWxldGVkUHJvamVjdE5hbWUgPT09IHByb2plY3RzQXJyYXlbaV0ucHJvamVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheS5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAoY3Jvc3NJbWFnZS5wYXJlbnROb2RlKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgcHJvamVjdFRpdGxlLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQgPSBcIkNhc3VhbFwiO1xyXG4gICAgICAgICAgICBzdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgY29uc29sZS5sb2cocHJvamVjdHNBcnJheSlcclxuICAgIGFjY2Vzc1Byb2plY3RzKCk7XHJcbn1cclxuXHJcbmNvbnN0IHByb2plY3RBZGRpbmdFdmVudHMgPSgpPT57XHJcbiAgICBhZGROZXdQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgIHByb2plY3RGb3JtLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpOy8vIGZvcm0gZm9yIG5ldyBwcm9qZWN0IFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGFkZFByb2plY3QoKTsvLyBzdWJtaXRzIGZvcm1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RBZGRQb3B1cFwiKVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBwcm9qZWN0Rm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgICAgICBuZXdQcm9qZWN0TmFtZS52YWx1ZT0gXCJcIjsgLy8gY2FuY2VscyB0aGUgZm9ybSBleGVjdXRpb25cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQge2FjY2Vzc1Byb2plY3RzLCBwcm9qZWN0QWRkaW5nRXZlbnRzfVxyXG5leHBvcnQge3Byb2plY3RGb3JtLCBuZXdQcm9qZWN0c307IiwiaW1wb3J0IHtwcm9qZWN0Rm9ybSxuZXdQcm9qZWN0c30gZnJvbSBcIi4vcHJvamVjdFwiO1xyXG5cclxuY29uc3QgRE9NYW5pbWF0aW9uID0gKCk9PntcclxuICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVcIik7XHJcbiAgICBjb25zdCBuYXZCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpO1xyXG4gICAgY29uc3QgdGFza0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbGlzdFwiKTtcclxuICAgIGNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tcIik7XHJcbiAgICBjb25zdCBhZGRLZXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrXCIpXHJcbiAgICBjb25zdCBhZGRLZXlWZXJ0aWNhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmVydGljYWxcIik7XHJcbiAgICBjb25zdCBhZGRLZXlIb3Jpem9udG9sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob3Jpem9udG9sXCIpO1xyXG4gICAgY29uc3QgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrLWZvcm1cIik7XHJcblxyXG4gICAgdGFza0FyZWEuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQgPSBcIkNhc3VhbFwiO1xyXG4gICAgbWVudS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PnsgLy8gZm9yIG1lbnUgYmFyIHZpc2libGVcclxuICAgICAgICBpZihuZXdQcm9qZWN0cy5jaGlsZEVsZW1lbnRDb3VudCA+Mil7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3REaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5ldy1wcm9qZWN0LXRpdGxlXCIpO1xyXG4gICAgICAgICAgICBuZXdQcm9qZWN0RGl2LmZvckVhY2goKHgpPT57XHJcbiAgICAgICAgICAgICAgICB4LmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpOy8vIGZvciByZW1vdmluZyB0aGUgbmV3UHJvamVjdHNGb3JtIHdpdGggbWVudSBjbG9zaW5nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImNoYW5nZVwiKTtcclxuICAgICAgICBuYXZCYXIuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7ICAgIFxyXG4gICAgICAgIHRhc2tBcmVhLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG4gICAgICAgIGFkZFRhc2tGb3JtLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG4gICAgICAgIHByb2plY3RGb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgICAgIHRhc2tzLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG4gICAgICAgIHRhc2suY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxuXHJcbiAgICBhZGRLZXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57IC8vIGZvciBhZGRpbmcgdGFzayBcclxuICAgICAgICBhZGRLZXlWZXJ0aWNhbC5jbGFzc0xpc3QudG9nZ2xlKFwiYWRkaW5nXCIpO1xyXG4gICAgICAgIGFkZEtleUhvcml6b250b2wuY2xhc3NMaXN0LnRvZ2dsZShcImFkZGluZ1wiKTsvLyBhbmltYXRpb24gZm9yIGFkZCBpY29uXHJcbiAgICAgICAgYWRkVGFza0Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImFkZGluZ1wiKTsvLyBtYWtlcyB0YXNrIGZvcm0gdmlzaWJsZVxyXG5cclxuICAgICAgICAoKG1lbnUucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkuY2xhc3NMaXN0LmFkZChcInNob3dcIilcclxuXHJcbiAgICAgICAgLy8gd2hlbiBmb3JtIG9wZW5zIGRhdGUgaXMgc2V0IGluaXRpYWxseSB0byB0b2RheXMgZGF0ZVxyXG4gICAgICAgIGNvbnN0IHRhc2tGb3JtRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1kYXRlXCIpO1xyXG4gICAgICAgIHRhc2tGb3JtRGF0ZS52YWx1ZSA9IG5ldyBEYXRlKCkudG9KU09OKCkuc2xpY2UoMCwxMCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRE9NYW5pbWF0aW9uOyIsImltcG9ydCBET01hbmltYXRpb24gZnJvbSBcIi4vbW9kdWxlcy9pbml0aWFsRE9NXCI7XHJcbmltcG9ydCB7IGFjY2Vzc1Byb2plY3RzLCBwcm9qZWN0QWRkaW5nRXZlbnRzIH0gZnJvbSBcIi4vbW9kdWxlcy9wcm9qZWN0XCI7XHJcbmltcG9ydCB7IGFkZE5ld1Rhc2tFdmVudCB9IGZyb20gXCIuL21vZHVsZXMvdGFza0FkZFwiO1xyXG5cclxuRE9NYW5pbWF0aW9uKCk7XHJcbmFjY2Vzc1Byb2plY3RzKCk7XHJcbnByb2plY3RBZGRpbmdFdmVudHMoKTtcclxuYWRkTmV3VGFza0V2ZW50KCk7XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsInByb2plY3RzQXJyYXkiLCJjaGVja1Rhc2tFeGlzdHMiLCJ0YXNrc1NlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwiYmdJbWFnZSIsImNoaWxkRWxlbWVudENvdW50IiwiVGFzayIsImNvbnN0cnVjdG9yIiwicHJvamVjdCIsInRpdGxlIiwiZGF0ZSIsInR5cGUiLCJzdGF0dXMiLCJhZGRpbmdOZXdUYXNrIiwibmV3VGFza0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YXNrTmFtZSIsInRleHRDb250ZW50IiwidGFza0RhdGUiLCJ0YXNrU3RhdHVzIiwidGFza0J1dHRvbnMiLCJkb25lSWNvbiIsIkltYWdlIiwiZGVsZXRlSWNvbiIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlZFRhc2tUaXRsZSIsImNoaWxkcmVuIiwiaSIsInRvZ2dsZSIsInJlbW92ZWRUYXNrVGl0bGUiLCJzcGxpY2UiLCJyZW1vdmUiLCJhZGROZXdQcm9qZWN0IiwicHJvamVjdEZvcm0iLCJhZGRCdXR0b24iLCJuZXdQcm9qZWN0cyIsImNhbmNlbEJ1dHRvbiIsInN0aCIsImxhc3RDaGlsZCIsInRhc2tQcm9qZWN0TmFtZSIsImFjY2Vzc1Byb2plY3RzIiwicHJvamVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdFRpdGxlIiwiZm9yRWFjaCIsImNoaWxkTm9kZXMiLCJtZW51IiwibmF2QmFyIiwidGFza0FyZWEiLCJ0YXNrcyIsInRhc2siLCJhZGRLZXkiLCJhZGRLZXlWZXJ0aWNhbCIsImFkZEtleUhvcml6b250b2wiLCJhZGRUYXNrRm9ybSIsIngiLCJ2YWx1ZSIsIkRhdGUiLCJ0b0pTT04iLCJzbGljZSIsInByZXZlbnREZWZhdWx0IiwibmV3UHJvamVjdE5hbWUiLCJuZXdQcm9qZWN0RGl2IiwiaW5zZXJ0QmVmb3JlIiwibmV3UHJvamVjdEltYWdlIiwibmV3UHJvamVjdEJ1dHRvbiIsImlkIiwiY3Jvc3NJbWFnZSIsImRlbGV0ZWRQcm9qZWN0TmFtZSIsImNvbnNvbGUiLCJsb2ciLCJhZGRQcm9qZWN0IiwiYWRkVGFza0J1dHRvbiIsImNhbmNlbFRhc2tCdXR0b24iLCJ0YXNrRm9ybU5hbWUiLCJ0YXNrRm9ybURhdGUiLCJ0YXNrRm9ybVR5cGUiLCJ0YXNrRm9ybU5hbWVWYWx1ZSIsInRhc2tGb3JtRGF0ZVZhbHVlIiwidGFza0Zvcm1UeXBlVmFsdWUiLCJuZXdUYXNrIiwicHVzaCIsImFkZE5ld1Rhc2siLCJhZGROZXdUYXNrRXZlbnQiXSwic291cmNlUm9vdCI6IiJ9
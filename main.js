(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var o=e.g.document;if(!t&&o&&(o.currentScript&&(t=o.currentScript.src),!t)){var n=o.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"1f757ac1762962d60ddc.png",o=e.p+"d367d5dbff6ca8e7e2f2.png",n=e.p+"df3b5dddd60da7069980.png",r=e.p+"fe50e1a3f0405d606b0c.png",s=e.p+"cfabfc38136dc55a9a0d.png",c=[],l=()=>{const e=document.querySelector(".tasks"),t=document.querySelector(".bg-image");e.childElementCount>1?t.src=r:1===e.childElementCount&&(t.src=s)},a=class{constructor(e,t,o,n,r){this.project=e,this.title=t,this.date=o,this.type=n,this.status=r}addingNewTask(){const e=document.querySelector(".tasks"),t=document.createElement("div");t.classList.add("task");const r=document.createElement("p");r.textContent=this.title;const s=document.createElement("p");s.textContent=this.date;const a=document.createElement("p");a.textContent=this.type;const d=document.createElement("div");d.classList.add("task-option");const i=new Image;i.src=n;const u=new Image;u.src=o,"complete"===this.status&&t.classList.add("complete"),e.appendChild(t),t.appendChild(r),t.appendChild(s),t.appendChild(a),t.appendChild(d),d.appendChild(i),d.appendChild(u),l(),i.addEventListener("click",(()=>{const e=i.parentNode.parentNode.children[0].textContent;for(let t=0;t<c.length;t+=1)e===c[t].title&&("complete"===c[t].status?c[t].status="incomplete":"incomplete"===c[t].status&&(c[t].status="complete"));i.parentNode.parentNode.classList.toggle("complete")})),u.addEventListener("click",(()=>{const e=u.parentNode.parentNode.children[0].textContent;for(let t=0;t<c.length;t+=1)e===c[t].title&&c.splice(t,1);u.parentNode.parentNode.remove(),l()}))}};function d(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e){d(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===i(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function m(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var p={};function h(){return p}function g(e,t){var o,n,r,s,c,l,a,i;d(1,arguments);var p=h(),g=m(null!==(o=null!==(n=null!==(r=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t||null===(c=t.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:p.weekStartsOn)&&void 0!==n?n:null===(a=p.locale)||void 0===a||null===(i=a.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==o?o:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=u(e),y=v.getDay(),f=(y<g?7:0)+y-g;return v.setDate(v.getDate()-f),v.setHours(0,0,0,0),v}function v(e,t,o){d(2,arguments);var n=g(e,o),r=g(t,o);return n.getTime()===r.getTime()}function y(e,t){return d(2,arguments),v(e,t,{weekStartsOn:1})}const f=document.querySelector(".tasks"),w=document.querySelector(".task-list").children[0],S=document.querySelector(".add-task"),L=document.querySelector(".new-project"),k=document.querySelector(".project-form"),C=document.querySelector(".add-button"),q=document.querySelector(".new-projects"),N=document.querySelector(".cancle-button"),b=document.querySelector(".tasks"),E=[],j=()=>{for(;b.childElementCount>1;)b.lastChild.remove();const e=document.querySelector(".task-list").children[0].textContent;for(let t=0;t<c.length;t+=1)e===c[t].project&&new a(c[t].project,c[t].title,c[t].date,c[t].type,c[t].status).addingNewTask();l()},x=()=>{const e=document.querySelectorAll("#project"),t=document.querySelector(".task-list");e.forEach((e=>{e.addEventListener("click",(()=>(S.classList.remove("hide"),t.childNodes[1].textContent!==e.textContent&&(t.childNodes[1].textContent=e.textContent,j(),0))))}))};(()=>{const e=document.querySelector(".menu"),t=document.querySelector(".projects"),o=document.querySelector(".task-list"),n=document.querySelector(".tasks"),r=document.querySelector(".task"),s=document.querySelector(".add-task"),d=document.querySelector(".vertical"),i=document.querySelector(".horizontol"),u=document.querySelector(".add-task-form");o.children[0].textContent="Casual",e.addEventListener("click",(()=>{q.childElementCount>2&&document.querySelectorAll(".new-project-title").forEach((e=>{e.classList.toggle("show")})),e.classList.toggle("change"),t.classList.toggle("show"),o.classList.toggle("show"),u.classList.toggle("show"),k.classList.remove("show"),n.classList.toggle("show"),r.classList.toggle("show")})),s.addEventListener("click",(()=>{d.classList.toggle("adding"),i.classList.toggle("adding"),u.classList.toggle("adding"),e.parentNode.parentNode.classList.add("show"),document.querySelector(".form-date").value=(new Date).toJSON().slice(0,10)})),document.querySelector(".all-task").addEventListener("click",(()=>{for(S.classList.remove("hide"),S.classList.add("hide");f.childElementCount>1;)f.lastChild.remove();w.textContent="All Task";for(let e=0;e<c.length;e+=1)new a(c[e].project,c[e].title,c[e].date,c[e].type,c[e].status).addingNewTask();l()})),document.querySelector(".today").addEventListener("click",(()=>{for(S.classList.remove("hide"),S.classList.add("hide");f.childElementCount>1;)f.lastChild.remove();w.textContent="Today";const e=(new Date).toJSON().slice(0,10);for(let t=0;t<c.length;t+=1)e===c[t].date&&new a(c[t].project,c[t].title,c[t].date,c[t].type,c[t].status).addingNewTask();l()})),document.querySelector(".this-week").addEventListener("click",(()=>{for(S.classList.remove("hide"),S.classList.add("hide");f.childElementCount>1;)f.lastChild.remove();w.textContent="This Week";const e=(new Date).toJSON().slice(0,10);for(let t=0;t<c.length;t+=1){const o=c[t].date.split("-"),n=e.split("-");y(new Date(n[0],n[1],n[2]),new Date(o[0],o[1],o[2]))&&new a(c[t].project,c[t].title,c[t].date,c[t].type,c[t].status).addingNewTask()}l()}))})(),x(),L.addEventListener("click",(()=>{k.classList.add("show")})),C.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".projectAddPopup");if(""===e.value)return!1;for(let t=0;t<E.length;t+=1)if(e.value.toLowerCase()===E[t])return e.style.borderColor="red",!1;const n=document.createElement("div");n.classList.add("new-project-title"),q.insertBefore(n,q.children[q.childElementCount-1]);const r=new Image;r.src=t,n.appendChild(r);const s=document.createElement("button");s.id="project",s.textContent=e.value,n.appendChild(s);const l=document.querySelector(".task-list");l.childNodes[1].textContent=e.value,j(),E.push(e.value.toLowerCase()),S.classList.remove("hide"),e.value="",k.classList.remove("show");const a=new Image;a.src=o,n.appendChild(a),a.addEventListener("click",(()=>{const e=a.parentNode.children[1].textContent;if(1===b.childElementCount)a.parentNode.remove(),l.childNodes[1].textContent="Casual",j();else{for(let t=0;t<=c.length;t+=1)e===c[t].project&&c.splice(t,1);a.parentNode.remove(),l.childNodes[1].textContent="Casual",j()}})),x()})()})),N.addEventListener("click",(e=>{const t=document.querySelector(".projectAddPopup");e.preventDefault(),k.classList.remove("show"),t.value=""})),(()=>{const e=document.querySelector(".add-task-button"),t=document.querySelector(".cancel-task-button"),o=document.querySelector(".vertical"),n=document.querySelector(".horizontol");e.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".form-name"),t=document.querySelector(".form-date"),o=document.querySelector(".form-type"),n=document.querySelector(".task-list").children[0].textContent,r=`${e.value}(${n})`,s=t.value,l=o.value;if(""===e.value)return alert("Enter some Task Name"),!1;for(let e=0;e<c.length;e+=1)if(r.toLowerCase()===c[e].title.toLowerCase())return alert("Task Already Exists"),!1;const d=new a(n,r,s,l,"incomplete");d.addingNewTask(),c.push(d),e.value="",t.value=(new Date).toJSON().slice(0,10),o.value="Normal"})(),document.querySelector(".add-task-form").classList.remove("adding"),o.classList.remove("adding"),n.classList.remove("adding"),document.querySelector(".main-container").classList.remove("show")})),t.addEventListener("click",(e=>{e.preventDefault(),o.classList.remove("adding"),n.classList.remove("adding"),document.querySelector(".main-container").classList.remove("show"),t.parentNode.parentNode.parentNode.classList.remove("adding")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0FBQyxFQ0QzQkEsRUFBb0JDLEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsRUFHaEIsQ0FGRSxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxNQUN4QyxDQUNBLENBUHVCLEcsTUNBeEIsSUFBSUMsRUFDQVAsRUFBb0JDLEVBQUVPLGdCQUFlRCxFQUFZUCxFQUFvQkMsRUFBRVEsU0FBVyxJQUN0RixJQUFJQyxFQUFXVixFQUFvQkMsRUFBRVMsU0FDckMsSUFBS0gsR0FBYUcsSUFDYkEsRUFBU0MsZ0JBQ1pKLEVBQVlHLEVBQVNDLGNBQWNDLE1BQy9CTCxHQUFXLENBQ2YsSUFBSU0sRUFBVUgsRUFBU0kscUJBQXFCLFVBQ3pDRCxFQUFRRSxTQUFRUixFQUFZTSxFQUFRQSxFQUFRRSxPQUFTLEdBQUdILElBQzVELENBSUQsSUFBS0wsRUFBVyxNQUFNLElBQUlTLE1BQU0seURBQ2hDVCxFQUFZQSxFQUFVVSxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRmpCLEVBQW9Ca0IsRUFBSVgsQyxnTENUbEJZLEVBQWdCLEdBQ2hCQyxFQUFrQixLQUNwQixNQUFNQyxFQUFlWCxTQUFTWSxjQUFjLFVBQ3RDQyxFQUFVYixTQUFTWSxjQUFjLGFBQ3BDRCxFQUFhRyxrQkFBb0IsRUFDaENELEVBQVFYLElBQU0sRUFFeUIsSUFBbkNTLEVBQWFHLG9CQUNqQkQsRUFBUVgsSUFBTSxFQUNsQixFQUdFYSxFQUFPLE1BQ1RDLFlBQVlDLEVBQVFDLEVBQU9DLEVBQU1DLEVBQU1DLEdBQ25DNUIsS0FBS3dCLFFBQVVBLEVBQ2Z4QixLQUFLeUIsTUFBUUEsRUFDYnpCLEtBQUswQixLQUFPQSxFQUNaMUIsS0FBSzJCLEtBQU9BLEVBQ1ozQixLQUFLNEIsT0FBU0EsQ0FDbEIsQ0FFQUMsZ0JBQ0ksTUFBTVgsRUFBZVgsU0FBU1ksY0FBYyxVQUV0Q1csRUFBYXZCLFNBQVN3QixjQUFjLE9BQzFDRCxFQUFXRSxVQUFVQyxJQUFJLFFBRXpCLE1BQU1DLEVBQVczQixTQUFTd0IsY0FBYyxLQUN4Q0csRUFBU0MsWUFBY25DLEtBQUt5QixNQUU1QixNQUFNVyxFQUFXN0IsU0FBU3dCLGNBQWMsS0FDeENLLEVBQVNELFlBQWNuQyxLQUFLMEIsS0FFNUIsTUFBTVcsRUFBYTlCLFNBQVN3QixjQUFjLEtBQzFDTSxFQUFXRixZQUFjbkMsS0FBSzJCLEtBRTlCLE1BQU1XLEVBQWMvQixTQUFTd0IsY0FBYyxPQUMzQ08sRUFBWU4sVUFBVUMsSUFBSSxlQUUxQixNQUFNTSxFQUFXLElBQUlDLE1BQ3JCRCxFQUFTOUIsSUFBTSxFQUVmLE1BQU1nQyxFQUFhLElBQUlELE1BQ3ZCQyxFQUFXaEMsSUFBTSxFQUVFLGFBQWhCVCxLQUFLNEIsUUFDSkUsRUFBV0UsVUFBVUMsSUFBSSxZQUc3QmYsRUFBYXdCLFlBQVlaLEdBQ3pCQSxFQUFXWSxZQUFZUixHQUN2QkosRUFBV1ksWUFBWU4sR0FDdkJOLEVBQVdZLFlBQVlMLEdBQ3ZCUCxFQUFXWSxZQUFZSixHQUN2QkEsRUFBWUksWUFBWUgsR0FDeEJELEVBQVlJLFlBQVlELEdBQ3hCeEIsSUFFQXNCLEVBQVNJLGlCQUFpQixTQUFTLEtBQy9CLE1BQU1DLEVBQXVCTCxFQUFtQixXQUFZLFdBQUVNLFNBQVMsR0FBR1YsWUFDMUUsSUFBSSxJQUFJVyxFQUFHLEVBQUdBLEVBQUU5QixFQUFjSixPQUFPa0MsR0FBRyxFQUNqQ0YsSUFBdUI1QixFQUFjOEIsR0FBR3JCLFFBQ1IsYUFBNUJULEVBQWM4QixHQUFHbEIsT0FDaEJaLEVBQWM4QixHQUFHbEIsT0FBUyxhQUVNLGVBQTVCWixFQUFjOEIsR0FBR2xCLFNBQ3JCWixFQUFjOEIsR0FBR2xCLE9BQVMsYUFJcENXLEVBQW1CLFdBQVksV0FBRVAsVUFBVWUsT0FBTyxXQUFXLElBS25FTixFQUFXRSxpQkFBaUIsU0FBUyxLQUNqQyxNQUFNSyxFQUFxQlAsRUFBcUIsV0FBWSxXQUFFSSxTQUFTLEdBQUdWLFlBQzFFLElBQUksSUFBSVcsRUFBRSxFQUFFQSxFQUFFOUIsRUFBY0osT0FBT2tDLEdBQUcsRUFDL0JFLElBQXFCaEMsRUFBYzhCLEdBQUdyQixPQUVyQ1QsRUFBY2lDLE9BQU9ILEVBQUUsR0FJN0JMLEVBQXFCLFdBQVksV0FBRVMsU0FDckNqQyxHQUFpQixHQUV6QixHQzdGVyxTQUFTa0MsRUFBYUMsRUFBVUMsR0FDN0MsR0FBSUEsRUFBS3pDLE9BQVN3QyxFQUNoQixNQUFNLElBQUlFLFVBQVVGLEVBQVcsYUFBZUEsRUFBVyxFQUFJLElBQU0sSUFBTSx1QkFBeUJDLEVBQUt6QyxPQUFTLFdBRXBILENDSkEsU0FBUzJDLEVBQVFDLEdBQW1WLE9BQXRPRCxFQUFyRCxtQkFBWEUsUUFBb0QsaUJBQXBCQSxPQUFPQyxTQUFtQyxTQUFpQkYsR0FBTyxjQUFjQSxDQUFLLEVBQXNCLFNBQWlCQSxHQUFPLE9BQU9BLEdBQXlCLG1CQUFYQyxRQUF5QkQsRUFBSWpDLGNBQWdCa0MsUUFBVUQsSUFBUUMsT0FBT0UsVUFBWSxnQkFBa0JILENBQUssRUFBWUQsRUFBUUMsRUFBTSxDQWtDMVcsU0FBU0ksRUFBT0MsR0FDN0JWLEVBQWEsRUFBR1csV0FDaEIsSUFBSUMsRUFBU0MsT0FBT0wsVUFBVU0sU0FBU0MsS0FBS0wsR0FFNUMsT0FBSUEsYUFBb0JNLE1BQThCLFdBQXRCWixFQUFRTSxJQUFxQyxrQkFBWEUsRUFFekQsSUFBSUksS0FBS04sRUFBU08sV0FDSSxpQkFBYlAsR0FBb0Msb0JBQVhFLEVBQ2xDLElBQUlJLEtBQUtOLElBRVMsaUJBQWJBLEdBQW9DLG9CQUFYRSxHQUFvRCxvQkFBWk0sVUFFM0VBLFFBQVFDLEtBQUssc05BRWJELFFBQVFDLE1BQUssSUFBSXpELE9BQVEwRCxRQUdwQixJQUFJSixLQUFLSyxLQUVwQixDQ3JEZSxTQUFTQyxFQUFVQyxHQUNoQyxHQUFvQixPQUFoQkEsSUFBd0MsSUFBaEJBLElBQXdDLElBQWhCQSxFQUNsRCxPQUFPRixJQUdULElBQUlHLEVBQVNDLE9BQU9GLEdBRXBCLE9BQUlHLE1BQU1GLEdBQ0RBLEVBR0ZBLEVBQVMsRUFBSUcsS0FBS0MsS0FBS0osR0FBVUcsS0FBS0UsTUFBTUwsRUFDckQsQ0NaQSxJQUFJTSxFQUFpQixDQUFDLEVBQ2YsU0FBU0MsSUFDZCxPQUFPRCxDQUNULENDNkJlLFNBQVNFLEVBQVlDLEVBQVdDLEdBQzdDLElBQUlDLEVBQU1DLEVBQU9DLEVBQU9DLEVBQXVCQyxFQUFpQkMsRUFBdUJDLEVBQXVCQyxFQUU5RzFDLEVBQWEsRUFBR1csV0FDaEIsSUFBSW1CLEVBQWlCQyxJQUNqQlksRUFBZXJCLEVBQSswQixRQUFwMEJhLEVBQThoQixRQUF0aEJDLEVBQWtkLFFBQXpjQyxFQUE2RyxRQUFwR0MsRUFBd0JKLGFBQXlDLEVBQVNBLEVBQVFTLG9CQUFvRCxJQUExQkwsRUFBbUNBLEVBQXdCSixTQUF5RixRQUF0Q0ssRUFBa0JMLEVBQVFVLGNBQXdDLElBQXBCTCxHQUE0RixRQUFyREMsRUFBd0JELEVBQWdCTCxlQUErQyxJQUExQk0sT0FBNUosRUFBd01BLEVBQXNCRyxvQkFBb0MsSUFBVk4sRUFBbUJBLEVBQVFQLEVBQWVhLG9CQUFvQyxJQUFWUCxFQUFtQkEsRUFBNEQsUUFBbkRLLEVBQXdCWCxFQUFlYyxjQUE4QyxJQUExQkgsR0FBeUcsUUFBNURDLEVBQXlCRCxFQUFzQlAsZUFBZ0QsSUFBM0JRLE9BQTlFLEVBQTJIQSxFQUF1QkMsb0JBQW1DLElBQVRSLEVBQWtCQSxFQUFPLEdBRW40QixLQUFNUSxHQUFnQixHQUFLQSxHQUFnQixHQUN6QyxNQUFNLElBQUlFLFdBQVcsb0RBR3ZCLElBQUl0RSxFQUFPa0MsRUFBT3dCLEdBQ2RhLEVBQU12RSxFQUFLd0UsU0FDWEMsR0FBUUYsRUFBTUgsRUFBZSxFQUFJLEdBQUtHLEVBQU1ILEVBR2hELE9BRkFwRSxFQUFLMEUsUUFBUTFFLEVBQUsyRSxVQUFZRixHQUM5QnpFLEVBQUs0RSxTQUFTLEVBQUcsRUFBRyxFQUFHLEdBQ2hCNUUsQ0FDVCxDQ1hlLFNBQVM2RSxFQUFXQyxFQUFlQyxFQUFnQnBCLEdBQ2hFbEMsRUFBYSxFQUFHVyxXQUNoQixJQUFJNEMsRUFBc0J2QixFQUFZcUIsRUFBZW5CLEdBQ2pEc0IsRUFBdUJ4QixFQUFZc0IsRUFBZ0JwQixHQUN2RCxPQUFPcUIsRUFBb0J0QyxZQUFjdUMsRUFBcUJ2QyxTQUNoRSxDQ2ZlLFNBQVN3QyxFQUFjSixFQUFlQyxHQUVuRCxPQURBdEQsRUFBYSxFQUFHVyxXQUNUeUMsRUFBV0MsRUFBZUMsRUFBZ0IsQ0FDL0NYLGFBQWMsR0FFbEIsQ0M3QkEsTUFBTTVFLEVBQWVYLFNBQVNZLGNBQWMsVUFDdEMwRixFQUFrQnRHLFNBQVNZLGNBQWMsY0FBYzBCLFNBQVMsR0FDaEVpRSxFQUFZdkcsU0FBU1ksY0FBYyxhQ0RuQzRGLEVBQWdCeEcsU0FBU1ksY0FBYyxnQkFDdkM2RixFQUFjekcsU0FBU1ksY0FBYyxpQkFDckMsRUFBWVosU0FBU1ksY0FBYyxlQUNuQzhGLEVBQWMxRyxTQUFTWSxjQUFjLGlCQUNyQytGLEVBQWUzRyxTQUFTWSxjQUFjLGtCQUN0QyxFQUFlWixTQUFTWSxjQUFjLFVBQ3RDZ0csRUFBZSxHQUdmQyxFQUFNLEtBQ1IsS0FBTSxFQUFhL0Ysa0JBQWtCLEdBQ2pDLEVBQWFnRyxVQUFVbkUsU0FFM0IsTUFBTTJELEVBQWtCdEcsU0FBU1ksY0FBYyxjQUFjMEIsU0FBUyxHQUFHVixZQUN6RSxJQUFJLElBQUlXLEVBQUUsRUFBRUEsRUFBRTlCLEVBQWNKLE9BQU9rQyxHQUFHLEVBQy9CK0QsSUFBb0I3RixFQUFjOEIsR0FBR3RCLFNBQ3BCLElBQUlGLEVBQUtOLEVBQWM4QixHQUFHdEIsUUFBUVIsRUFBYzhCLEdBQUdyQixNQUMvRFQsRUFBYzhCLEdBQUdwQixLQUFLVixFQUFjOEIsR0FBR25CLEtBQU1YLEVBQWM4QixHQUFHbEIsUUFDMURDLGdCQUdoQlosR0FBaUIsRUFHZnFHLEVBQWlCLEtBQ25CLE1BQU1DLEVBQVdoSCxTQUFTaUgsaUJBQWlCLFlBQ3JDQyxFQUFlbEgsU0FBU1ksY0FBYyxjQUM1Q29HLEVBQVNHLFNBQVNsRyxJQUNkQSxFQUFRbUIsaUJBQWlCLFNBQVMsS0FDOUIsbUJBQTRCLFFBQ3pCOEUsRUFBYUUsV0FBVyxHQUFHeEYsY0FBZ0JYLEVBQVFXLGNBQ3REc0YsRUFBYUUsV0FBVyxHQUFHeEYsWUFBY1gsRUFBUVcsWUFDakRpRixJQUNPLEtBQ1YsR0FDSixFQ3JDZ0IsTUFDakIsTUFBTVEsRUFBT3JILFNBQVNZLGNBQWMsU0FDOUIwRyxFQUFTdEgsU0FBU1ksY0FBYyxhQUNoQzJHLEVBQVd2SCxTQUFTWSxjQUFjLGNBQ2xDNEcsRUFBUXhILFNBQVNZLGNBQWMsVUFDL0I2RyxFQUFPekgsU0FBU1ksY0FBYyxTQUM5QjhHLEVBQVMxSCxTQUFTWSxjQUFjLGFBQ2hDK0csRUFBaUIzSCxTQUFTWSxjQUFjLGFBQ3hDZ0gsRUFBbUI1SCxTQUFTWSxjQUFjLGVBQzFDaUgsRUFBYzdILFNBQVNZLGNBQWMsa0JBRTNDMkcsRUFBU2pGLFNBQVMsR0FBR1YsWUFBYyxTQUNuQ3lGLEVBQUtqRixpQkFBaUIsU0FBUyxLQUN4QnNFLEVBQVk1RixrQkFBbUIsR0FDUmQsU0FBU2lILGlCQUFpQixzQkFDbENFLFNBQVNXLElBQ25CQSxFQUFFckcsVUFBVWUsT0FBTyxPQUFPLElBR2xDNkUsRUFBSzVGLFVBQVVlLE9BQU8sVUFDdEI4RSxFQUFPN0YsVUFBVWUsT0FBTyxRQUN4QitFLEVBQVM5RixVQUFVZSxPQUFPLFFBQzFCcUYsRUFBWXBHLFVBQVVlLE9BQU8sUUFDN0JpRSxFQUFZaEYsVUFBVWtCLE9BQU8sUUFDN0I2RSxFQUFNL0YsVUFBVWUsT0FBTyxRQUN2QmlGLEVBQUtoRyxVQUFVZSxPQUFPLE9BQU8sSUFJakNrRixFQUFPdEYsaUJBQWlCLFNBQVMsS0FDN0J1RixFQUFlbEcsVUFBVWUsT0FBTyxVQUNoQ29GLEVBQWlCbkcsVUFBVWUsT0FBTyxVQUNsQ3FGLEVBQVlwRyxVQUFVZSxPQUFPLFVBRTNCNkUsRUFBZSxXQUFZLFdBQUU1RixVQUFVQyxJQUFJLFFBR3hCMUIsU0FBU1ksY0FBYyxjQUMvQm1ILE9BQVEsSUFBSW5FLE1BQU9vRSxTQUFTQyxNQUFNLEVBQUUsR0FBRyxJRmhDeENqSSxTQUFTWSxjQUFjLGFBQy9Cd0IsaUJBQWlCLFNBQVEsS0FHN0IsSUFGQW1FLEVBQVU5RSxVQUFVa0IsT0FBTyxRQUMzQjRELEVBQVU5RSxVQUFVQyxJQUFJLFFBQ2xCZixFQUFhRyxrQkFBa0IsR0FDakNILEVBQWFtRyxVQUFVbkUsU0FFM0IyRCxFQUFnQjFFLFlBQWMsV0FDOUIsSUFBSSxJQUFJVyxFQUFFLEVBQUVBLEVBQUU5QixFQUFjSixPQUFPa0MsR0FBRyxFQUNsQixJQUFJeEIsRUFBS04sRUFBYzhCLEdBQUd0QixRQUFRUixFQUFjOEIsR0FBR3JCLE1BQzNEVCxFQUFjOEIsR0FBR3BCLEtBQUtWLEVBQWM4QixHQUFHbkIsS0FBTVgsRUFBYzhCLEdBQUdsQixRQUM5REMsZ0JBRVpaLEdBQWlCLElBS0ZWLFNBQVNZLGNBQWMsVUFDL0J3QixpQkFBaUIsU0FBUyxLQUdqQyxJQUZBbUUsRUFBVTlFLFVBQVVrQixPQUFPLFFBQzNCNEQsRUFBVTlFLFVBQVVDLElBQUksUUFDbEJmLEVBQWFHLGtCQUFrQixHQUNqQ0gsRUFBYW1HLFVBQVVuRSxTQUUzQjJELEVBQWdCMUUsWUFBYyxRQUM5QixNQUFNc0csR0FBYSxJQUFJdEUsTUFBT29FLFNBQVNDLE1BQU0sRUFBRSxJQUMvQyxJQUFJLElBQUkxRixFQUFFLEVBQUVBLEVBQUU5QixFQUFjSixPQUFPa0MsR0FBRyxFQUMvQjJGLElBQWV6SCxFQUFjOEIsR0FBR3BCLE1BQ2YsSUFBSUosRUFBS04sRUFBYzhCLEdBQUd0QixRQUFRUixFQUFjOEIsR0FBR3JCLE1BQy9EVCxFQUFjOEIsR0FBR3BCLEtBQUtWLEVBQWM4QixHQUFHbkIsS0FBTVgsRUFBYzhCLEdBQUdsQixRQUMxREMsZ0JBR2hCWixHQUFpQixJQUtIVixTQUFTWSxjQUFjLGNBQy9Cd0IsaUJBQWlCLFNBQVMsS0FHaEMsSUFGQW1FLEVBQVU5RSxVQUFVa0IsT0FBTyxRQUMzQjRELEVBQVU5RSxVQUFVQyxJQUFJLFFBQ2xCZixFQUFhRyxrQkFBa0IsR0FDakNILEVBQWFtRyxVQUFVbkUsU0FFM0IyRCxFQUFnQjFFLFlBQWMsWUFDOUIsTUFBTXNHLEdBQWEsSUFBSXRFLE1BQU9vRSxTQUFTQyxNQUFNLEVBQUUsSUFFL0MsSUFBSSxJQUFJMUYsRUFBRSxFQUFFQSxFQUFFOUIsRUFBY0osT0FBT2tDLEdBQUcsRUFBRSxDQUNwQyxNQUFNdUQsRUFBVXJGLEVBQWM4QixHQUFHcEIsS0FBS2dILE1BQU0sS0FDdENDLEVBQWdCRixFQUFXQyxNQUFNLEtBQ3BDOUIsRUFBYyxJQUFJekMsS0FBS3dFLEVBQWMsR0FBSUEsRUFBYyxHQUFJQSxFQUFjLElBQzVFLElBQUl4RSxLQUFLa0MsRUFBUSxHQUFJQSxFQUFRLEdBQUlBLEVBQVEsTUFDckIsSUFBSS9FLEVBQUtOLEVBQWM4QixHQUFHdEIsUUFBUVIsRUFBYzhCLEdBQUdyQixNQUMvRFQsRUFBYzhCLEdBQUdwQixLQUFLVixFQUFjOEIsR0FBR25CLEtBQU1YLEVBQWM4QixHQUFHbEIsUUFDMURDLGVBRWhCLENBQ0FaLEdBQWlCLEdFdkJQLEVDeENsQixHQUNBcUcsSUZzR0lQLEVBQWNwRSxpQkFBaUIsU0FBUyxLQUNwQ3FFLEVBQVloRixVQUFVQyxJQUFJLE9BQU8sSUFHckMsRUFBVVUsaUJBQWlCLFNBQVV6QyxJQUNqQ0EsRUFBRTBJLGlCQXJFUyxNQUNmLE1BQU1DLEVBQWlCdEksU0FBU1ksY0FBYyxvQkFFOUMsR0FBNEIsS0FBekIwSCxFQUFlUCxNQUNkLE9BQU8sRUFFWCxJQUFJLElBQUl4RixFQUFFLEVBQUVBLEVBQUVxRSxFQUFhdkcsT0FBT2tDLEdBQUcsRUFDakMsR0FBRytGLEVBQWVQLE1BQU1RLGdCQUFrQjNCLEVBQWFyRSxHQUVuRCxPQURBK0YsRUFBZUUsTUFBTUMsWUFBYyxPQUM1QixFQUlmLE1BQU1DLEVBQWdCMUksU0FBU3dCLGNBQWMsT0FDN0NrSCxFQUFjakgsVUFBVUMsSUFBSSxxQkFDNUJnRixFQUFZaUMsYUFBYUQsRUFBZWhDLEVBQVlwRSxTQUFTb0UsRUFBWTVGLGtCQUFrQixJQUUzRixNQUFNOEgsRUFBa0IsSUFBSTNHLE1BQzVCMkcsRUFBZ0IxSSxJQUFNLEVBQ3RCd0ksRUFBY3ZHLFlBQVl5RyxHQUUxQixNQUFNQyxFQUFtQjdJLFNBQVN3QixjQUFjLFVBQ2hEcUgsRUFBaUJDLEdBQUssVUFDdEJELEVBQWlCakgsWUFBYzBHLEVBQWVQLE1BQzlDVyxFQUFjdkcsWUFBWTBHLEdBRTFCLE1BQU0zQixFQUFlbEgsU0FBU1ksY0FBYyxjQUM1Q3NHLEVBQWFFLFdBQVcsR0FBR3hGLFlBQWMwRyxFQUFlUCxNQUN4RGxCLElBQ0FELEVBQWFtQyxLQUFLVCxFQUFlUCxNQUFNUSxlQUV2QyxtQkFBNEIsUUFFNUJELEVBQWVQLE1BQU8sR0FDdEJ0QixFQUFZaEYsVUFBVWtCLE9BQU8sUUFFN0IsTUFBTXFHLEVBQWEsSUFBSS9HLE1BQ3ZCK0csRUFBVzlJLElBQU0sRUFDakJ3SSxFQUFjdkcsWUFBWTZHLEdBRTFCQSxFQUFXNUcsaUJBQWlCLFNBQVMsS0FDakMsTUFBTTZHLEVBQXNCRCxFQUFxQixXQUFFMUcsU0FBUyxHQUFHVixZQUMvRCxHQUFzQyxJQUFuQyxFQUFhZCxrQkFDWGtJLEVBQXFCLFdBQUVyRyxTQUN4QnVFLEVBQWFFLFdBQVcsR0FBR3hGLFlBQWMsU0FDekNpRixRQUVBLENBQ0EsSUFBSSxJQUFJdEUsRUFBRSxFQUFFQSxHQUFHOUIsRUFBY0osT0FBT2tDLEdBQUcsRUFDaEMwRyxJQUF1QnhJLEVBQWM4QixHQUFHdEIsU0FDdkNSLEVBQWNpQyxPQUFPSCxFQUFFLEdBRzlCeUcsRUFBcUIsV0FBRXJHLFNBRXhCdUUsRUFBYUUsV0FBVyxHQUFHeEYsWUFBYyxTQUN6Q2lGLEdBQ0osS0FFSkUsR0FDUSxFQVVKbUMsRUFBWSxJQUdoQnZDLEVBQWF2RSxpQkFBaUIsU0FBVXpDLElBQ3BDLE1BQU0ySSxFQUFpQnRJLFNBQVNZLGNBQWMsb0JBQzlDakIsRUFBRTBJLGlCQUNGNUIsRUFBWWhGLFVBQVVrQixPQUFPLFFBQzdCMkYsRUFBZVAsTUFBTyxFQUFFLElUb0JSLE1BQ3BCLE1BQU1vQixFQUFnQm5KLFNBQVNZLGNBQWMsb0JBQ3ZDd0ksRUFBbUJwSixTQUFTWSxjQUFjLHVCQUMxQytHLEVBQWlCM0gsU0FBU1ksY0FBYyxhQUN4Q2dILEVBQW1CNUgsU0FBU1ksY0FBYyxlQUVoRHVJLEVBQWMvRyxpQkFBaUIsU0FBVXpDLElBQ3JDQSxFQUFFMEksaUJBbkRTLE1BQ2YsTUFBTWdCLEVBQWVySixTQUFTWSxjQUFjLGNBQ3RDMEksRUFBZXRKLFNBQVNZLGNBQWMsY0FDdEMySSxFQUFldkosU0FBU1ksY0FBYyxjQUN0QzBGLEVBQWtCdEcsU0FBU1ksY0FBYyxjQUFjMEIsU0FBUyxHQUFHVixZQUduRTRILEVBQW9CLEdBQUdILEVBQWF0QixTQUFTekIsS0FDN0NtRCxFQUFvQkgsRUFBYXZCLE1BQ2pDMkIsRUFBb0JILEVBQWF4QixNQUd2QyxHQUEwQixLQUF2QnNCLEVBQWF0QixNQUVaLE9BREE0QixNQUFNLHlCQUNDLEVBRVgsSUFBSSxJQUFJcEgsRUFBRSxFQUFFQSxFQUFFOUIsRUFBY0osT0FBT2tDLEdBQUcsRUFDbEMsR0FBR2lILEVBQWtCakIsZ0JBQWtCOUgsRUFBYzhCLEdBQUdyQixNQUFNcUgsY0FFMUQsT0FEQW9CLE1BQU0sd0JBQ0MsRUFLZixNQUFNQyxFQUFVLElBQUk3SSxFQUFLdUYsRUFBaUJrRCxFQUFtQkMsRUFBbUJDLEVBZGpFLGNBZWZFLEVBQVF0SSxnQkFDUmIsRUFBY3NJLEtBQUthLEdBUW5CUCxFQUFhdEIsTUFBUSxHQUNyQnVCLEVBQWF2QixPQUFRLElBQUluRSxNQUFPb0UsU0FBU0MsTUFBTSxFQUFFLElBQ2pEc0IsRUFBYXhCLE1BQVEsUUFJYixFQVlKOEIsR0FDb0I3SixTQUFTWSxjQUFjLGtCQUUvQmEsVUFBVWtCLE9BQU8sVUFFN0JnRixFQUFlbEcsVUFBVWtCLE9BQU8sVUFDaENpRixFQUFpQm5HLFVBQVVrQixPQUFPLFVBQ1ozQyxTQUFTWSxjQUFjLG1CQUMvQmEsVUFBVWtCLE9BQU8sT0FBTyxJQUcxQ3lHLEVBQWlCaEgsaUJBQWlCLFNBQVV6QyxJQUN4Q0EsRUFBRTBJLGlCQUNGVixFQUFlbEcsVUFBVWtCLE9BQU8sVUFDaENpRixFQUFpQm5HLFVBQVVrQixPQUFPLFVBQ1ozQyxTQUFTWSxjQUFjLG1CQUMvQmEsVUFBVWtCLE9BQU8sUUFDNUJ5RyxFQUEyQixXQUFZLFdBQVksV0FBRTNILFVBQVVrQixPQUFPLFNBQVMsR0FDckYsRVcvSkxtSCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kb2xpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly90b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9tb2R1bGVzL3Rhc2tBZGQuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lSVNPV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9tb2R1bGVzL3RpbWVXaXNlVGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvaW5pdGlhbERPTS5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCBjaXJjbGUgZnJvbSBcIi4vaW1hZ2VzL2NpcmNlbC5wbmdcIjtcclxuaW1wb3J0IGNyb3NzIGZyb20gXCIuL2ltYWdlcy9jcm9zcy5wbmdcIjtcclxuaW1wb3J0IGJnSWNvbkFmdGVyIGZyb20gXCIuL2ltYWdlcy90YXNrLWFyZWEtaW1hZ2UtYWZ0ZXIucG5nXCI7XHJcbmltcG9ydCBiZ0ljb25CZWZvcmUgZnJvbSBcIi4vaW1hZ2VzL3Rhc2stYXJlYS1pbWFnZS5wbmdcIjtcclxuXHJcbi8vIGNvbnN0IHByb2plY3RzT2JqZWN0ID0ge307XHJcbmNvbnN0IHByb2plY3RzQXJyYXkgPSBbXTtcclxuY29uc3QgY2hlY2tUYXNrRXhpc3RzID0gKCk9PntcclxuICAgIGNvbnN0IHRhc2tzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIik7XHJcbiAgICBjb25zdCBiZ0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iZy1pbWFnZVwiKTtcclxuICAgIGlmKHRhc2tzU2VjdGlvbi5jaGlsZEVsZW1lbnRDb3VudCA+IDEpey8vIGNoZWNrIGlmIHRoZXJlIGFyZSBhbnkgdGFza1xyXG4gICAgICAgIGJnSW1hZ2Uuc3JjID0gYmdJY29uQWZ0ZXI7Ly8gY2huYWdlcyBiZyBpbWFnZVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0YXNrc1NlY3Rpb24uY2hpbGRFbGVtZW50Q291bnQgPT09IDEpe1xyXG4gICAgICAgIGJnSW1hZ2Uuc3JjID0gYmdJY29uQmVmb3JlO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBUYXNrID0gY2xhc3N7Ly8gY29uc3RydWN0b3IgZm9yIGNvbGxlY3RpbmcgbmV3VGFzayBpbmZvXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9qZWN0LHRpdGxlLCBkYXRlLCB0eXBlLCBzdGF0dXMpe1xyXG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3RcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhZGRpbmdOZXdUYXNrKCl7Ly8gY3JlYXRlcyBhbmQgYXBwZW5kcyBuZXcgdGFzayBcclxuICAgICAgICBjb25zdCB0YXNrc1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBuZXdUYXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIpO1xyXG5cclxuICAgICAgICBjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgICAgIHRhc2tOYW1lLnRleHRDb250ZW50ID0gdGhpcy50aXRsZTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgICB0YXNrRGF0ZS50ZXh0Q29udGVudCA9IHRoaXMuZGF0ZTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFza1N0YXR1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgICAgIHRhc2tTdGF0dXMudGV4dENvbnRlbnQgPSB0aGlzLnR5cGU7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhc2tCdXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0YXNrQnV0dG9ucy5jbGFzc0xpc3QuYWRkKFwidGFzay1vcHRpb25cIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGRvbmVJY29uID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgZG9uZUljb24uc3JjID0gY2lyY2xlO1xyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVJY29uID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgZGVsZXRlSWNvbi5zcmMgPSBjcm9zcztcclxuXHJcbiAgICAgICAgaWYodGhpcy5zdGF0dXMgPT09IFwiY29tcGxldGVcIil7XHJcbiAgICAgICAgICAgIG5ld1Rhc2tEaXYuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGFza3NTZWN0aW9uLmFwcGVuZENoaWxkKG5ld1Rhc2tEaXYpO1xyXG4gICAgICAgIG5ld1Rhc2tEaXYuYXBwZW5kQ2hpbGQodGFza05hbWUpO1xyXG4gICAgICAgIG5ld1Rhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0RhdGUpO1xyXG4gICAgICAgIG5ld1Rhc2tEaXYuYXBwZW5kQ2hpbGQodGFza1N0YXR1cyk7XHJcbiAgICAgICAgbmV3VGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrQnV0dG9ucyk7XHJcbiAgICAgICAgdGFza0J1dHRvbnMuYXBwZW5kQ2hpbGQoZG9uZUljb24pO1xyXG4gICAgICAgIHRhc2tCdXR0b25zLmFwcGVuZENoaWxkKGRlbGV0ZUljb24pO1xyXG4gICAgICAgIGNoZWNrVGFza0V4aXN0cygpO1xyXG5cclxuICAgICAgICBkb25lSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcclxuICAgICAgICAgICAgY29uc3QgY29tcGxldGVkVGFza1RpdGxlID0gKChkb25lSWNvbi5wYXJlbnROb2RlKS5wYXJlbnROb2RlKS5jaGlsZHJlblswXS50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0wOyBpPHByb2plY3RzQXJyYXkubGVuZ3RoO2krPTEpeyAvLyBjaG5hZ2VzIHRoZSBzdGF0dXMgb2YgdGhlIHRhc2sgXHJcbiAgICAgICAgICAgICAgICBpZihjb21wbGV0ZWRUYXNrVGl0bGUgPT09IHByb2plY3RzQXJyYXlbaV0udGl0bGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHByb2plY3RzQXJyYXlbaV0uc3RhdHVzID09PSBcImNvbXBsZXRlXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0c0FycmF5W2ldLnN0YXR1cyA9IFwiaW5jb21wbGV0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJvamVjdHNBcnJheVtpXS5zdGF0dXMgPT09IFwiaW5jb21wbGV0ZVwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheVtpXS5zdGF0dXMgPSBcImNvbXBsZXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAoKGRvbmVJY29uLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLmNsYXNzTGlzdC50b2dnbGUoXCJjb21wbGV0ZVwiKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNBcnJheSk7ICBcclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZGVsZXRlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcclxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZFRhc2tUaXRsZSA9ICgoZGVsZXRlSWNvbi5wYXJlbnROb2RlKS5wYXJlbnROb2RlKS5jaGlsZHJlblswXS50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxwcm9qZWN0c0FycmF5Lmxlbmd0aDtpKz0xKXsvLyByZW1vdmVzIHRoZSB0YXNrIGZyb20gdGhlIG1haW4gYXJyYXlcclxuICAgICAgICAgICAgICAgIGlmKHJlbW92ZWRUYXNrVGl0bGUgPT09IHByb2plY3RzQXJyYXlbaV0udGl0bGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzQXJyYXkuc3BsaWNlKGksMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNBcnJheSk7XHJcbiAgICAgICAgICAgICgoZGVsZXRlSWNvbi5wYXJlbnROb2RlKS5wYXJlbnROb2RlKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgY2hlY2tUYXNrRXhpc3RzKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNvbnN0IGFkZE5ld1Rhc2sgPSAoKT0+e1xyXG4gICAgY29uc3QgdGFza0Zvcm1OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLW5hbWVcIik7XHJcbiAgICBjb25zdCB0YXNrRm9ybURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tZGF0ZVwiKTtcclxuICAgIGNvbnN0IHRhc2tGb3JtVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS10eXBlXCIpO1xyXG4gICAgY29uc3QgdGFza1Byb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWxpc3RcIikuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XHJcblxyXG4gICAgLy8gZ2V0cyB2YWx1ZSBmcm9tIHRoZSBmb3JtXHJcbiAgICBjb25zdCB0YXNrRm9ybU5hbWVWYWx1ZSA9IGAke3Rhc2tGb3JtTmFtZS52YWx1ZX0oJHt0YXNrUHJvamVjdE5hbWV9KWA7XHJcbiAgICBjb25zdCB0YXNrRm9ybURhdGVWYWx1ZSA9IHRhc2tGb3JtRGF0ZS52YWx1ZTtcclxuICAgIGNvbnN0IHRhc2tGb3JtVHlwZVZhbHVlID0gdGFza0Zvcm1UeXBlLnZhbHVlO1xyXG4gICAgY29uc3Qgc3RhdHVzID0gXCJpbmNvbXBsZXRlXCI7XHJcblxyXG4gICAgaWYodGFza0Zvcm1OYW1lLnZhbHVlID09PSBcIlwiKXtcclxuICAgICAgICBhbGVydChcIkVudGVyIHNvbWUgVGFzayBOYW1lXCIpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yKGxldCBpPTA7aTxwcm9qZWN0c0FycmF5Lmxlbmd0aDtpKz0xKXsvLyBjaGVjayBpZiB0aGUgcHJvamVjdCBhbHJlYWR5IGV4aXN0c1xyXG4gICAgICAgIGlmKHRhc2tGb3JtTmFtZVZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IHByb2plY3RzQXJyYXlbaV0udGl0bGUudG9Mb3dlckNhc2UoKSl7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiVGFzayBBbHJlYWR5IEV4aXN0c1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgVGFzayh0YXNrUHJvamVjdE5hbWUgLHRhc2tGb3JtTmFtZVZhbHVlLCB0YXNrRm9ybURhdGVWYWx1ZSwgdGFza0Zvcm1UeXBlVmFsdWUsIHN0YXR1cyk7XHJcbiAgICBuZXdUYXNrLmFkZGluZ05ld1Rhc2soKTsvLyBjYWxsaW5nIGZ1bmN0aW9uXHJcbiAgICBwcm9qZWN0c0FycmF5LnB1c2gobmV3VGFzayk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhuZXdUYXNrKTtcclxuXHJcbiAgICBcclxuICAgIC8vIHByb2plY3RzQXJyYXkucHVzaCh0YXNrVGl0bGUuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQpO1xyXG4gICAgLy8gY29uc3QgdW5pcXVlUHJvamVjdHMgPSBbLi4ubmV3IFNldChwcm9qZWN0c0FycmF5KV07XHJcbiAgICAvLyBwcm9qZWN0c09iamVjdC50YXNrID0gdW5pcXVlUHJvamVjdHM7XHJcbiAgICAvLyByZXNldHRpbmcgZm9ybSB2YWx1ZVxyXG4gICAgdGFza0Zvcm1OYW1lLnZhbHVlID0gXCJcIjtcclxuICAgIHRhc2tGb3JtRGF0ZS52YWx1ZSA9IG5ldyBEYXRlKCkudG9KU09OKCkuc2xpY2UoMCwxMCk7XHJcbiAgICB0YXNrRm9ybVR5cGUudmFsdWUgPSBcIk5vcm1hbFwiO1xyXG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNBcnJheSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0c09iamVjdCk7XHJcblxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuXHJcblxyXG5jb25zdCBhZGROZXdUYXNrRXZlbnQgPSAoKT0+e1xyXG4gICAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2stYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgY2FuY2VsVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLXRhc2stYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgYWRkS2V5VmVydGljYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZlcnRpY2FsXCIpO1xyXG4gICAgY29uc3QgYWRkS2V5SG9yaXpvbnRvbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9yaXpvbnRvbFwiKTtcclxuXHJcbiAgICBhZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSk9PntcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgYWRkTmV3VGFzaygpO1xyXG4gICAgICAgIGNvbnN0IGFkZFRhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFzay1mb3JtXCIpO1xyXG4gICAgICAgIC8vIFxyXG4gICAgICAgIGFkZFRhc2tGb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7XHJcbiAgICAgICAgLy8gcmVzZXR0aW5nIHBsdXMgYnV0dG9uIGFuZCBtYWluIGNvbnRhaW5lclxyXG4gICAgICAgIGFkZEtleVZlcnRpY2FsLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7XHJcbiAgICAgICAgYWRkS2V5SG9yaXpvbnRvbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkaW5nXCIpOy8vIGFuaW1hdGlvbiBmb3IgYWRkIGljb24gXHJcbiAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250YWluZXJcIik7XHJcbiAgICAgICAgbWFpbkNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgIH0pXHJcblxyXG4gICAgY2FuY2VsVGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGFkZEtleVZlcnRpY2FsLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7XHJcbiAgICAgICAgYWRkS2V5SG9yaXpvbnRvbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkaW5nXCIpOy8vIGFuaW1hdGlvbiBmb3IgYWRkIGljb24gXHJcbiAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250YWluZXJcIik7XHJcbiAgICAgICAgbWFpbkNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgICAgICAoKChjYW5jZWxUYXNrQnV0dG9uLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLnBhcmVudE5vZGUpLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7XHJcbiAgICB9KVxyXG59XHJcblxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydFxyXG5leHBvcnQge2FkZE5ld1Rhc2tFdmVudCwgcHJvamVjdHNBcnJheSwgVGFzaywgY2hlY2tUYXNrRXhpc3RzfTsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgX3R5cGVvZihhcmd1bWVudCkgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNzdHJpbmctYXJndW1lbnRzXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJ2YXIgZGVmYXVsdE9wdGlvbnMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIGRlZmF1bHRPcHRpb25zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRPcHRpb25zKG5ld09wdGlvbnMpIHtcbiAgZGVmYXVsdE9wdGlvbnMgPSBuZXdPcHRpb25zO1xufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuLi9fbGliL2RlZmF1bHRPcHRpb25zL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBvcHRpb25zKSB7XG4gIHZhciBfcmVmLCBfcmVmMiwgX3JlZjMsIF9vcHRpb25zJHdlZWtTdGFydHNPbiwgX29wdGlvbnMkbG9jYWxlLCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8sIF9kZWZhdWx0T3B0aW9ucyRsb2NhbCwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMjtcblxuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMoKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IHRvSW50ZWdlcigoX3JlZiA9IChfcmVmMiA9IChfcmVmMyA9IChfb3B0aW9ucyR3ZWVrU3RhcnRzT24gPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyR3ZWVrU3RhcnRzT24gIT09IHZvaWQgMCA/IF9vcHRpb25zJHdlZWtTdGFydHNPbiA6IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPSBfb3B0aW9ucyRsb2NhbGUub3B0aW9ucykgPT09IG51bGwgfHwgX29wdGlvbnMkbG9jYWxlJG9wdGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRsb2NhbGUkb3B0aW8ud2Vla1N0YXJ0c09uKSAhPT0gbnVsbCAmJiBfcmVmMyAhPT0gdm9pZCAwID8gX3JlZjMgOiBkZWZhdWx0T3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYyICE9PSB2b2lkIDAgPyBfcmVmMiA6IChfZGVmYXVsdE9wdGlvbnMkbG9jYWwgPSBkZWZhdWx0T3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbDIgPSBfZGVmYXVsdE9wdGlvbnMkbG9jYWwub3B0aW9ucykgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RlZmF1bHRPcHRpb25zJGxvY2FsMi53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiAwKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZXZWVrIGZyb20gXCIuLi9zdGFydE9mV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1NhbWVXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcik/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcik/XG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcilcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDcsIDMxKSwgbmV3IERhdGUoMjAxNCwgOCwgNCkpXG4gKiAvLz0+IHRydWVcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgd2VlayBzdGFydHMgd2l0aCBNb25kYXksXG4gKiAvLyBhcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSwge1xuICogICB3ZWVrU3RhcnRzT246IDFcbiAqIH0pXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAxIEphbnVhcnkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgMCwgMSksIG5ldyBEYXRlKDIwMTUsIDAsIDEpKVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0LCBvcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZUxlZnQsIG9wdGlvbnMpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVSaWdodCwgb3B0aW9ucyk7XG4gIHJldHVybiBkYXRlTGVmdFN0YXJ0T2ZXZWVrLmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZldlZWsuZ2V0VGltZSgpO1xufSIsImltcG9ydCBpc1NhbWVXZWVrIGZyb20gXCIuLi9pc1NhbWVXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVJU09XZWVrXG4gKiBAY2F0ZWdvcnkgSVNPIFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBJU08gd2VlayAoYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBJU08gd2VlayAoYW5kIHllYXIpP1xuICpcbiAqIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIElTTyB3ZWVrIChhbmQgeWVhcilcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDEgU2VwdGVtYmVyIDIwMTQgYW5kIDcgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgSVNPIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1NhbWVJU09XZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA3KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMSBTZXB0ZW1iZXIgMjAxNCBhbmQgMSBTZXB0ZW1iZXIgMjAxNSBpbiB0aGUgc2FtZSBJU08gd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZUlTT1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMSksIG5ldyBEYXRlKDIwMTUsIDgsIDEpKVxuICogLy89PiBmYWxzZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZUlTT1dlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0LCB7XG4gICAgd2Vla1N0YXJ0c09uOiAxXG4gIH0pO1xufSIsImltcG9ydCBpc1NhbWVJU09XZWVrIGZyb20gXCJkYXRlLWZucy9pc1NhbWVJU09XZWVrXCI7XHJcbmltcG9ydCB7IGNoZWNrVGFza0V4aXN0cywgcHJvamVjdHNBcnJheSwgVGFzayB9IGZyb20gXCIuL3Rhc2tBZGRcIjtcclxuXHJcblxyXG5jb25zdCB0YXNrc1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpO1xyXG5jb25zdCB0YXNrUHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbGlzdFwiKS5jaGlsZHJlblswXTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFza1wiKTtcclxuXHJcbmNvbnN0IGdldEFsbFRhc2s9ICgpPT57XHJcbiAgICBjb25zdCBhbGxUYXNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGwtdGFza1wiKTtcclxuICAgIGFsbFRhc2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKCk9PntcclxuICAgICAgICBhZGRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgICAgICAgYWRkQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xyXG4gICAgICAgIHdoaWxlKHRhc2tzU2VjdGlvbi5jaGlsZEVsZW1lbnRDb3VudD4xKXsvLyByZW1vdmVzIHRoZSBjdXJyZW50IHByb2plY3RzIHRhc2tzIGZvciBuZXcgc2VsZWN0ZWQgcHJvamVjdFxyXG4gICAgICAgICAgICB0YXNrc1NlY3Rpb24ubGFzdENoaWxkLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXNrUHJvamVjdE5hbWUudGV4dENvbnRlbnQgPSBcIkFsbCBUYXNrXCI7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxwcm9qZWN0c0FycmF5Lmxlbmd0aDtpKz0xKXsvLyB0YXNrZXMgdmFsdWUgZnJvbSBhcnJheSBhbmQgYXBwZW5kcyB0aGUgYWxsIHByb2plY3RzIHRhc2tcclxuICAgICAgICAgICAgY29uc3QgbmV3VGFzayA9IG5ldyBUYXNrKHByb2plY3RzQXJyYXlbaV0ucHJvamVjdCxwcm9qZWN0c0FycmF5W2ldLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzQXJyYXlbaV0uZGF0ZSxwcm9qZWN0c0FycmF5W2ldLnR5cGUsIHByb2plY3RzQXJyYXlbaV0uc3RhdHVzKTtcclxuICAgICAgICAgICAgbmV3VGFzay5hZGRpbmdOZXdUYXNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoZWNrVGFza0V4aXN0cygpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGdldFRvZGF5VGFza3MgPSAoKT0+e1xyXG4gICAgY29uc3QgdG9kYXlUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kYXlcIik7XHJcbiAgICB0b2RheVRhc2tzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgIGFkZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgICBhZGRCdXR0b24uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICAgICAgd2hpbGUodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50PjEpey8vIHJlbW92ZXMgdGhlIGN1cnJlbnQgcHJvamVjdHMgdGFza3MgZm9yIG5ldyBzZWxlY3RlZCBwcm9qZWN0XHJcbiAgICAgICAgICAgIHRhc2tzU2VjdGlvbi5sYXN0Q2hpbGQucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2tQcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IFwiVG9kYXlcIjtcclxuICAgICAgICBjb25zdCB0b2RheXNEYXRlID0gbmV3IERhdGUoKS50b0pTT04oKS5zbGljZSgwLDEwKTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPHByb2plY3RzQXJyYXkubGVuZ3RoO2krPTEpey8vIHRhc2tlcyB2YWx1ZSBmcm9tIGFycmF5IGFuZCBhcHBlbmRzIHRoZSBzZWxlY2V0ZWQgcHJvamVjdHMgdGFza1xyXG4gICAgICAgICAgICBpZih0b2RheXNEYXRlID09PSBwcm9qZWN0c0FycmF5W2ldLmRhdGUpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFzayA9IG5ldyBUYXNrKHByb2plY3RzQXJyYXlbaV0ucHJvamVjdCxwcm9qZWN0c0FycmF5W2ldLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzQXJyYXlbaV0uZGF0ZSxwcm9qZWN0c0FycmF5W2ldLnR5cGUsIHByb2plY3RzQXJyYXlbaV0uc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIG5ld1Rhc2suYWRkaW5nTmV3VGFzaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoZWNrVGFza0V4aXN0cygpO1xyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgZ2V0V2Vla1Rhc2tzID0gKCk9PntcclxuICAgIGNvbnN0IHdlZWtUYXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGhpcy13ZWVrXCIpO1xyXG4gICAgd2Vla1Rhc2tzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgIGFkZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcclxuICAgICAgICBhZGRCdXR0b24uY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XHJcbiAgICAgICAgd2hpbGUodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50PjEpey8vIHJlbW92ZXMgdGhlIGN1cnJlbnQgcHJvamVjdHMgdGFza3MgZm9yIG5ldyBzZWxlY3RlZCBwcm9qZWN0XHJcbiAgICAgICAgICAgIHRhc2tzU2VjdGlvbi5sYXN0Q2hpbGQucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2tQcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IFwiVGhpcyBXZWVrXCI7XHJcbiAgICAgICAgY29uc3QgdG9kYXlzRGF0ZSA9IG5ldyBEYXRlKCkudG9KU09OKCkuc2xpY2UoMCwxMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxwcm9qZWN0c0FycmF5Lmxlbmd0aDtpKz0xKXsvLyB0YXNrZXMgdmFsdWUgZnJvbSBhcnJheSBhbmQgYXBwZW5kcyB0aGUgc2VsZWNldGVkIHByb2plY3RzIHRhc2tcclxuICAgICAgICAgICAgY29uc3QgZ2V0RGF0ZSA9IHByb2plY3RzQXJyYXlbaV0uZGF0ZS5zcGxpdChcIi1cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGdldFRvZGF5c0RhdGUgPSB0b2RheXNEYXRlLnNwbGl0KFwiLVwiKTtcclxuICAgICAgICAgICAgaWYoaXNTYW1lSVNPV2VlayhuZXcgRGF0ZShnZXRUb2RheXNEYXRlWzBdLCBnZXRUb2RheXNEYXRlWzFdLCBnZXRUb2RheXNEYXRlWzJdKSwgXHJcbiAgICAgICAgICAgIG5ldyBEYXRlKGdldERhdGVbMF0sIGdldERhdGVbMV0sIGdldERhdGVbMl0pKSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYXNrID0gbmV3IFRhc2socHJvamVjdHNBcnJheVtpXS5wcm9qZWN0LHByb2plY3RzQXJyYXlbaV0udGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheVtpXS5kYXRlLHByb2plY3RzQXJyYXlbaV0udHlwZSwgcHJvamVjdHNBcnJheVtpXS5zdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgbmV3VGFzay5hZGRpbmdOZXdUYXNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2hlY2tUYXNrRXhpc3RzKCk7XHJcbiAgICB9KVxyXG59XHJcbmV4cG9ydCB7Z2V0QWxsVGFzaywgZ2V0VG9kYXlUYXNrcywgZ2V0V2Vla1Rhc2tzLCBhZGRCdXR0b259OyIsImltcG9ydCB0YXNrSWNvbiBmcm9tIFwiLi9pbWFnZXMvdGFza19GSUxMMF93Z2h0NDAwX0dSQUQwX29wc3o0OC5wbmdcIjtcclxuaW1wb3J0IGNyb3NzSWNvbiBmcm9tIFwiLi9pbWFnZXMvY3Jvc3MucG5nXCI7XHJcbmltcG9ydCB7IFRhc2ssIHByb2plY3RzQXJyYXksIGNoZWNrVGFza0V4aXN0cyB9IGZyb20gXCIuL3Rhc2tBZGRcIjtcclxuaW1wb3J0IHsgYWRkQnV0dG9uIGFzIHBsdXNCdXR0b24gfSBmcm9tIFwiLi90aW1lV2lzZVRhc2tzXCI7XHJcblxyXG5jb25zdCBhZGROZXdQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdFwiKTtcclxuY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtZm9ybVwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBuZXdQcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3LXByb2plY3RzXCIpO1xyXG5jb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNsZS1idXR0b25cIik7XHJcbmNvbnN0IHRhc2tzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIik7XHJcbmNvbnN0IHByb2plY3RzTmFtZSA9IFtdO1xyXG5cclxuXHJcbmNvbnN0IHN0aCA9ICgpPT57XHJcbiAgICB3aGlsZSh0YXNrc1NlY3Rpb24uY2hpbGRFbGVtZW50Q291bnQ+MSl7Ly8gcmVtb3ZlcyB0aGUgY3VycmVudCBwcm9qZWN0cyB0YXNrcyBmb3IgbmV3IHNlbGVjdGVkIHByb2plY3RcclxuICAgICAgICB0YXNrc1NlY3Rpb24ubGFzdENoaWxkLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGFza1Byb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWxpc3RcIikuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XHJcbiAgICBmb3IobGV0IGk9MDtpPHByb2plY3RzQXJyYXkubGVuZ3RoO2krPTEpey8vIHRhc2tlcyB2YWx1ZSBmcm9tIGFycmF5IGFuZCBhcHBlbmRzIHRoZSBzZWxlY2V0ZWQgcHJvamVjdHMgdGFza1xyXG4gICAgICAgIGlmKHRhc2tQcm9qZWN0TmFtZSA9PT0gcHJvamVjdHNBcnJheVtpXS5wcm9qZWN0KXtcclxuICAgICAgICAgICAgY29uc3QgbmV3VGFzayA9IG5ldyBUYXNrKHByb2plY3RzQXJyYXlbaV0ucHJvamVjdCxwcm9qZWN0c0FycmF5W2ldLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheVtpXS5kYXRlLHByb2plY3RzQXJyYXlbaV0udHlwZSwgcHJvamVjdHNBcnJheVtpXS5zdGF0dXMpO1xyXG4gICAgICAgICAgICBuZXdUYXNrLmFkZGluZ05ld1Rhc2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjaGVja1Rhc2tFeGlzdHMoKTtcclxufVxyXG5cclxuY29uc3QgYWNjZXNzUHJvamVjdHMgPSAoKT0+eyAvLyBhY2Nlc3MgbmFtZXMgb2YgcHJvamVjdHNcclxuICAgIGNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNwcm9qZWN0XCIpO1xyXG4gICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWxpc3RcIik7XHJcbiAgICBwcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KT0+e1xyXG4gICAgICAgIHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgICAgIHBsdXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XHJcbiAgICAgICAgICAgIGlmKHByb2plY3RUaXRsZS5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50ID09PSBwcm9qZWN0LnRleHRDb250ZW50KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHByb2plY3RUaXRsZS5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50ID0gcHJvamVjdC50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgc3RoKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuY29uc3QgYWRkUHJvamVjdCA9ICgpPT57Ly8gY3JlYXRlcyBuZXcgcHJvamVjdCBkaXYgYW5kIGFwcGVuZHMgYmVmb3JlIHRoZSBhZGQgYnV0dG9uXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdEFkZFBvcHVwXCIpO1xyXG5cclxuICAgIGlmKG5ld1Byb2plY3ROYW1lLnZhbHVlID09PSBcIlwiKXtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IGk9MDtpPHByb2plY3RzTmFtZS5sZW5ndGg7aSs9MSl7Ly8gY2hlY2sgaWYgdGhlIHByb2plY3QgYWxyZWFkeSBleGlzdHNcclxuICAgICAgICBpZihuZXdQcm9qZWN0TmFtZS52YWx1ZS50b0xvd2VyQ2FzZSgpID09PSBwcm9qZWN0c05hbWVbaV0pe1xyXG4gICAgICAgICAgICBuZXdQcm9qZWN0TmFtZS5zdHlsZS5ib3JkZXJDb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3UHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBuZXdQcm9qZWN0RGl2LmNsYXNzTGlzdC5hZGQoXCJuZXctcHJvamVjdC10aXRsZVwiKVxyXG4gICAgbmV3UHJvamVjdHMuaW5zZXJ0QmVmb3JlKG5ld1Byb2plY3REaXYsIG5ld1Byb2plY3RzLmNoaWxkcmVuW25ld1Byb2plY3RzLmNoaWxkRWxlbWVudENvdW50LTFdKTtcclxuXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIG5ld1Byb2plY3RJbWFnZS5zcmMgPSB0YXNrSWNvbjtcclxuICAgIG5ld1Byb2plY3REaXYuYXBwZW5kQ2hpbGQobmV3UHJvamVjdEltYWdlKTtcclxuXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIG5ld1Byb2plY3RCdXR0b24uaWQgPSBcInByb2plY3RcIjtcclxuICAgIG5ld1Byb2plY3RCdXR0b24udGV4dENvbnRlbnQgPSBuZXdQcm9qZWN0TmFtZS52YWx1ZTtcclxuICAgIG5ld1Byb2plY3REaXYuYXBwZW5kQ2hpbGQobmV3UHJvamVjdEJ1dHRvbik7XHJcblxyXG4gICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWxpc3RcIik7XHJcbiAgICBwcm9qZWN0VGl0bGUuY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudCA9IG5ld1Byb2plY3ROYW1lLnZhbHVlO1xyXG4gICAgc3RoKCk7XHJcbiAgICBwcm9qZWN0c05hbWUucHVzaChuZXdQcm9qZWN0TmFtZS52YWx1ZS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RzTmFtZSk7XHJcbiAgICBwbHVzQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xyXG5cclxuICAgIG5ld1Byb2plY3ROYW1lLnZhbHVlPSBcIlwiO1xyXG4gICAgcHJvamVjdEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcblxyXG4gICAgY29uc3QgY3Jvc3NJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgY3Jvc3NJbWFnZS5zcmMgPSBjcm9zc0ljb247XHJcbiAgICBuZXdQcm9qZWN0RGl2LmFwcGVuZENoaWxkKGNyb3NzSW1hZ2UpO1xyXG5cclxuICAgIGNyb3NzSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgY29uc3QgZGVsZXRlZFByb2plY3ROYW1lID0gKGNyb3NzSW1hZ2UucGFyZW50Tm9kZSkuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgaWYodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50ID09PSAxKXtcclxuICAgICAgICAgICAgKGNyb3NzSW1hZ2UucGFyZW50Tm9kZSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHByb2plY3RUaXRsZS5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50ID0gXCJDYXN1YWxcIjtcclxuICAgICAgICAgICAgc3RoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8PXByb2plY3RzQXJyYXkubGVuZ3RoO2krPTEpey8vIHdoZW4gcHJvamVjdCBpcyBkZWxldGVkIHRoZSBwcm9qZWN0J3MgYWxsIHRhc2sgZ2V0cyBkZWxldGVkXHJcbiAgICAgICAgICAgICAgICBpZihkZWxldGVkUHJvamVjdE5hbWUgPT09IHByb2plY3RzQXJyYXlbaV0ucHJvamVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheS5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAoY3Jvc3NJbWFnZS5wYXJlbnROb2RlKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgLy8gd2hlbiBhIHByb2plY3QgZ2V0cyBkZWxldGVkIHByb2plY3QgZ2V0cyBiYWNrIHRvIENhc3VhbFxyXG4gICAgICAgICAgICBwcm9qZWN0VGl0bGUuY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudCA9IFwiQ2FzdWFsXCI7XHJcbiAgICAgICAgICAgIHN0aCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBhY2Nlc3NQcm9qZWN0cygpO1xyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbmNvbnN0IHByb2plY3RBZGRpbmdFdmVudHMgPSgpPT57XHJcbiAgICBhZGROZXdQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgIHByb2plY3RGb3JtLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpOy8vIGZvcm0gZm9yIG5ldyBwcm9qZWN0IFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGFkZFByb2plY3QoKTsvLyBzdWJtaXRzIGZvcm1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RBZGRQb3B1cFwiKVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBwcm9qZWN0Rm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgICAgICBuZXdQcm9qZWN0TmFtZS52YWx1ZT0gXCJcIjsgLy8gY2FuY2VscyB0aGUgZm9ybSBleGVjdXRpb25cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQge2FjY2Vzc1Byb2plY3RzLCBwcm9qZWN0QWRkaW5nRXZlbnRzfVxyXG5leHBvcnQge3Byb2plY3RGb3JtLCBuZXdQcm9qZWN0c307IiwiaW1wb3J0IHtwcm9qZWN0Rm9ybSxuZXdQcm9qZWN0c30gZnJvbSBcIi4vcHJvamVjdFwiO1xyXG5pbXBvcnQgeyBnZXRBbGxUYXNrLCBnZXRUb2RheVRhc2tzLCBnZXRXZWVrVGFza3MgfSBmcm9tIFwiLi90aW1lV2lzZVRhc2tzXCI7XHJcblxyXG5jb25zdCBET01hbmltYXRpb24gPSAoKT0+e1xyXG4gICAgY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudVwiKTtcclxuICAgIGNvbnN0IG5hdkJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIik7XHJcbiAgICBjb25zdCB0YXNrQXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1saXN0XCIpO1xyXG4gICAgY29uc3QgdGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpO1xyXG4gICAgY29uc3QgdGFzayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza1wiKTtcclxuICAgIGNvbnN0IGFkZEtleSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2tcIilcclxuICAgIGNvbnN0IGFkZEtleVZlcnRpY2FsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52ZXJ0aWNhbFwiKTtcclxuICAgIGNvbnN0IGFkZEtleUhvcml6b250b2wgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhvcml6b250b2xcIik7XHJcbiAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2stZm9ybVwiKTtcclxuXHJcbiAgICB0YXNrQXJlYS5jaGlsZHJlblswXS50ZXh0Q29udGVudCA9IFwiQ2FzdWFsXCI7XHJcbiAgICBtZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+eyAvLyBmb3IgbWVudSBiYXIgdmlzaWJsZVxyXG4gICAgICAgIGlmKG5ld1Byb2plY3RzLmNoaWxkRWxlbWVudENvdW50ID4yKXtcclxuICAgICAgICAgICAgY29uc3QgbmV3UHJvamVjdERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmV3LXByb2plY3QtdGl0bGVcIik7XHJcbiAgICAgICAgICAgIG5ld1Byb2plY3REaXYuZm9yRWFjaCgoeCk9PntcclxuICAgICAgICAgICAgICAgIHguY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7Ly8gZm9yIHJlbW92aW5nIHRoZSBuZXdQcm9qZWN0c0Zvcm0gd2l0aCBtZW51IGNsb3NpbmdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiY2hhbmdlXCIpO1xyXG4gICAgICAgIG5hdkJhci5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTsgICAgXHJcbiAgICAgICAgdGFza0FyZWEuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbiAgICAgICAgYWRkVGFza0Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbiAgICAgICAgcHJvamVjdEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICAgICAgdGFza3MuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbiAgICAgICAgdGFzay5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcclxuICAgICAgICBcclxuICAgIH0pO1xyXG5cclxuICAgIGFkZEtleS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PnsgLy8gZm9yIGFkZGluZyB0YXNrIFxyXG4gICAgICAgIGFkZEtleVZlcnRpY2FsLmNsYXNzTGlzdC50b2dnbGUoXCJhZGRpbmdcIik7XHJcbiAgICAgICAgYWRkS2V5SG9yaXpvbnRvbC5jbGFzc0xpc3QudG9nZ2xlKFwiYWRkaW5nXCIpOy8vIGFuaW1hdGlvbiBmb3IgYWRkIGljb25cclxuICAgICAgICBhZGRUYXNrRm9ybS5jbGFzc0xpc3QudG9nZ2xlKFwiYWRkaW5nXCIpOy8vIG1ha2VzIHRhc2sgZm9ybSB2aXNpYmxlXHJcblxyXG4gICAgICAgICgobWVudS5wYXJlbnROb2RlKS5wYXJlbnROb2RlKS5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKVxyXG5cclxuICAgICAgICAvLyB3aGVuIGZvcm0gb3BlbnMgZGF0ZSBpcyBzZXQgaW5pdGlhbGx5IHRvIHRvZGF5cyBkYXRlXHJcbiAgICAgICAgY29uc3QgdGFza0Zvcm1EYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWRhdGVcIik7XHJcbiAgICAgICAgdGFza0Zvcm1EYXRlLnZhbHVlID0gbmV3IERhdGUoKS50b0pTT04oKS5zbGljZSgwLDEwKTtcclxuICAgIH0pO1xyXG4gICAgZ2V0QWxsVGFzaygpO1xyXG4gICAgZ2V0VG9kYXlUYXNrcygpO1xyXG4gICAgZ2V0V2Vla1Rhc2tzKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERPTWFuaW1hdGlvbjsiLCJpbXBvcnQgRE9NYW5pbWF0aW9uIGZyb20gXCIuL21vZHVsZXMvaW5pdGlhbERPTVwiO1xyXG5pbXBvcnQgeyBhY2Nlc3NQcm9qZWN0cywgcHJvamVjdEFkZGluZ0V2ZW50cyB9IGZyb20gXCIuL21vZHVsZXMvcHJvamVjdFwiO1xyXG5pbXBvcnQgeyBhZGROZXdUYXNrRXZlbnQgfSBmcm9tIFwiLi9tb2R1bGVzL3Rhc2tBZGRcIjtcclxuXHJcblxyXG5ET01hbmltYXRpb24oKTtcclxuYWNjZXNzUHJvamVjdHMoKTtcclxucHJvamVjdEFkZGluZ0V2ZW50cygpO1xyXG5hZGROZXdUYXNrRXZlbnQoKTtcclxuXHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsInByb2plY3RzQXJyYXkiLCJjaGVja1Rhc2tFeGlzdHMiLCJ0YXNrc1NlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwiYmdJbWFnZSIsImNoaWxkRWxlbWVudENvdW50IiwiVGFzayIsImNvbnN0cnVjdG9yIiwicHJvamVjdCIsInRpdGxlIiwiZGF0ZSIsInR5cGUiLCJzdGF0dXMiLCJhZGRpbmdOZXdUYXNrIiwibmV3VGFza0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YXNrTmFtZSIsInRleHRDb250ZW50IiwidGFza0RhdGUiLCJ0YXNrU3RhdHVzIiwidGFza0J1dHRvbnMiLCJkb25lSWNvbiIsIkltYWdlIiwiZGVsZXRlSWNvbiIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlZFRhc2tUaXRsZSIsImNoaWxkcmVuIiwiaSIsInRvZ2dsZSIsInJlbW92ZWRUYXNrVGl0bGUiLCJzcGxpY2UiLCJyZW1vdmUiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJUeXBlRXJyb3IiLCJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJwcm90b3R5cGUiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ3VtZW50cyIsImFyZ1N0ciIsIk9iamVjdCIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsIndhcm4iLCJzdGFjayIsIk5hTiIsInRvSW50ZWdlciIsImRpcnR5TnVtYmVyIiwibnVtYmVyIiwiTnVtYmVyIiwiaXNOYU4iLCJNYXRoIiwiY2VpbCIsImZsb29yIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsInN0YXJ0T2ZXZWVrIiwiZGlydHlEYXRlIiwib3B0aW9ucyIsIl9yZWYiLCJfcmVmMiIsIl9yZWYzIiwiX29wdGlvbnMkd2Vla1N0YXJ0c09uIiwiX29wdGlvbnMkbG9jYWxlIiwiX29wdGlvbnMkbG9jYWxlJG9wdGlvIiwiX2RlZmF1bHRPcHRpb25zJGxvY2FsIiwiX2RlZmF1bHRPcHRpb25zJGxvY2FsMiIsIndlZWtTdGFydHNPbiIsImxvY2FsZSIsIlJhbmdlRXJyb3IiLCJkYXkiLCJnZXREYXkiLCJkaWZmIiwic2V0RGF0ZSIsImdldERhdGUiLCJzZXRIb3VycyIsImlzU2FtZVdlZWsiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZXZWVrIiwiZGF0ZVJpZ2h0U3RhcnRPZldlZWsiLCJpc1NhbWVJU09XZWVrIiwidGFza1Byb2plY3ROYW1lIiwiYWRkQnV0dG9uIiwiYWRkTmV3UHJvamVjdCIsInByb2plY3RGb3JtIiwibmV3UHJvamVjdHMiLCJjYW5jZWxCdXR0b24iLCJwcm9qZWN0c05hbWUiLCJzdGgiLCJsYXN0Q2hpbGQiLCJhY2Nlc3NQcm9qZWN0cyIsInByb2plY3RzIiwicXVlcnlTZWxlY3RvckFsbCIsInByb2plY3RUaXRsZSIsImZvckVhY2giLCJjaGlsZE5vZGVzIiwibWVudSIsIm5hdkJhciIsInRhc2tBcmVhIiwidGFza3MiLCJ0YXNrIiwiYWRkS2V5IiwiYWRkS2V5VmVydGljYWwiLCJhZGRLZXlIb3Jpem9udG9sIiwiYWRkVGFza0Zvcm0iLCJ4IiwidmFsdWUiLCJ0b0pTT04iLCJzbGljZSIsInRvZGF5c0RhdGUiLCJzcGxpdCIsImdldFRvZGF5c0RhdGUiLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Byb2plY3ROYW1lIiwidG9Mb3dlckNhc2UiLCJzdHlsZSIsImJvcmRlckNvbG9yIiwibmV3UHJvamVjdERpdiIsImluc2VydEJlZm9yZSIsIm5ld1Byb2plY3RJbWFnZSIsIm5ld1Byb2plY3RCdXR0b24iLCJpZCIsInB1c2giLCJjcm9zc0ltYWdlIiwiZGVsZXRlZFByb2plY3ROYW1lIiwiYWRkUHJvamVjdCIsImFkZFRhc2tCdXR0b24iLCJjYW5jZWxUYXNrQnV0dG9uIiwidGFza0Zvcm1OYW1lIiwidGFza0Zvcm1EYXRlIiwidGFza0Zvcm1UeXBlIiwidGFza0Zvcm1OYW1lVmFsdWUiLCJ0YXNrRm9ybURhdGVWYWx1ZSIsInRhc2tGb3JtVHlwZVZhbHVlIiwiYWxlcnQiLCJuZXdUYXNrIiwiYWRkTmV3VGFzayIsImFkZE5ld1Rhc2tFdmVudCJdLCJzb3VyY2VSb290IjoiIn0=
(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var o=e.g.document;if(!t&&o&&(o.currentScript&&(t=o.currentScript.src),!t)){var n=o.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"1f757ac1762962d60ddc.png",o=e.p+"d367d5dbff6ca8e7e2f2.png",n=e.p+"df3b5dddd60da7069980.png",c=e.p+"fe50e1a3f0405d606b0c.png",s=e.p+"cfabfc38136dc55a9a0d.png",r=[],l=()=>{const e=document.querySelector(".tasks"),t=document.querySelector(".bg-image");e.childElementCount>1?t.src=c:1===e.childElementCount&&(t.src=s)},d=class{constructor(e,t,o,n,c){this.project=e,this.title=t,this.date=o,this.type=n,this.status=c}addingNewTask(){const e=document.querySelector(".tasks"),t=document.createElement("div");t.classList.add("task");const c=document.createElement("p");c.textContent=this.title;const s=document.createElement("p");s.textContent=this.date;const d=document.createElement("p");d.textContent=this.type;const a=document.createElement("div");a.classList.add("task-option");const i=new Image;i.src=n;const u=new Image;u.src=o,"complete"===this.status&&t.classList.add("complete"),e.appendChild(t),t.appendChild(c),t.appendChild(s),t.appendChild(d),t.appendChild(a),a.appendChild(i),a.appendChild(u),l(),i.addEventListener("click",(()=>{const e=i.parentNode.parentNode.children[0].textContent;for(let t=0;t<r.length;t+=1)e===r[t].title&&("complete"===r[t].status?r[t].status="incomplete":"incomplete"===r[t].status&&(r[t].status="complete"));i.parentNode.parentNode.classList.toggle("complete")})),u.addEventListener("click",(()=>{const e=u.parentNode.parentNode.children[0].textContent;for(let t=0;t<r.length;t+=1)e===r[t].title&&r.splice(t,1);u.parentNode.parentNode.remove(),l()}))}},a=document.querySelector(".new-project"),i=document.querySelector(".project-form"),u=document.querySelector(".add-button"),m=document.querySelector(".new-projects"),p=document.querySelector(".cancle-button"),h=document.querySelector(".tasks"),g=()=>{for(;h.childElementCount>1;)h.lastChild.remove();const e=document.querySelector(".task-list").children[0].textContent;for(let t=0;t<r.length;t+=1)e===r[t].project&&new d(r[t].project,r[t].title,r[t].date,r[t].type,r[t].status).addingNewTask();l()},v=()=>{const e=document.querySelectorAll("#project"),t=document.querySelector(".task-list");e.forEach((e=>{e.addEventListener("click",(()=>{if(t.childNodes[1].textContent===e.textContent)return!1;t.childNodes[1].textContent=e.textContent,g()}))}))};(()=>{const e=document.querySelector(".menu"),t=document.querySelector(".projects"),o=document.querySelector(".task-list"),n=document.querySelector(".tasks"),c=document.querySelector(".task"),s=document.querySelector(".add-task"),r=document.querySelector(".vertical"),l=document.querySelector(".horizontol"),d=document.querySelector(".add-task-form");o.children[0].textContent="Casual",e.addEventListener("click",(()=>{m.childElementCount>2&&document.querySelectorAll(".new-project-title").forEach((e=>{e.classList.toggle("show")})),e.classList.toggle("change"),t.classList.toggle("show"),o.classList.toggle("show"),d.classList.toggle("show"),i.classList.remove("show"),n.classList.toggle("show"),c.classList.toggle("show")})),s.addEventListener("click",(()=>{r.classList.toggle("adding"),l.classList.toggle("adding"),d.classList.toggle("adding"),e.parentNode.parentNode.classList.add("show"),document.querySelector(".form-date").value=(new Date).toJSON().slice(0,10)}))})(),v(),a.addEventListener("click",(()=>{i.classList.add("show")})),u.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".projectAddPopup"),n=document.createElement("div");n.classList.add("new-project-title"),m.insertBefore(n,m.children[m.childElementCount-1]);const c=new Image;c.src=t,n.appendChild(c);const s=document.createElement("button");s.id="project",s.textContent=e.value,n.appendChild(s);const l=document.querySelector(".task-list");l.childNodes[1].textContent=e.value,g(),e.value="",i.classList.remove("show");const d=new Image;d.src=o,n.appendChild(d),d.addEventListener("click",(()=>{const e=d.parentNode.children[1].textContent;if(1===h.childElementCount)d.parentNode.remove(),l.childNodes[1].textContent="Casual",g();else{for(let t=0;t<=r.length;t+=1)e===r[t].project&&r.splice(t,1);d.parentNode.remove(),l.childNodes[1].textContent="Casual",g()}})),console.log(r),v()})()})),p.addEventListener("click",(e=>{const t=document.querySelector(".projectAddPopup");e.preventDefault(),i.classList.remove("show"),t.value=""})),(()=>{const e=document.querySelector(".add-task-button"),t=document.querySelector(".cancel-task-button"),o=document.querySelector(".vertical"),n=document.querySelector(".horizontol");e.addEventListener("click",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".form-name"),t=document.querySelector(".form-date"),o=document.querySelector(".form-type"),n=document.querySelector(".task-list").children[0].textContent,c=e.value,s=t.value,l=o.value,a=document.querySelector(".add-task-form"),i=new d(n,c,s,l,"incomplete");i.addingNewTask(),r.push(i),e.value="",t.value=(new Date).toJSON().slice(0,10),o.value="Normal",a.classList.remove("adding")})(),o.classList.remove("adding"),n.classList.remove("adding"),document.querySelector(".main-container").classList.remove("show")})),t.addEventListener("click",(e=>{e.preventDefault(),o.classList.remove("adding"),n.classList.remove("adding"),document.querySelector(".main-container").classList.remove("show"),t.parentNode.parentNode.parentNode.classList.remove("adding")}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0IsRUFBaUJ4QyxVQUFVa0IsT0FBTyxVQUNaM0MsU0FBU1ksY0FBYyxtQkFDL0JhLFVBQVVrQixPQUFPLFFBQzVCMEMsRUFBMkIsV0FBWSxXQUFZLFdBQUU1RCxVQUFVa0IsT0FBTyxTQUFTLEdBQ3JGLEVHL0lMb0QsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG9saXN0L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vdG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvbW9kdWxlcy90YXNrQWRkLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL21vZHVsZXMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9tb2R1bGVzL2luaXRpYWxET00uanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJpbXBvcnQgY2lyY2xlIGZyb20gXCIuL2ltYWdlcy9jaXJjZWwucG5nXCI7XHJcbmltcG9ydCBjcm9zcyBmcm9tIFwiLi9pbWFnZXMvY3Jvc3MucG5nXCI7XHJcbmltcG9ydCBiZ0ljb25BZnRlciBmcm9tIFwiLi9pbWFnZXMvdGFzay1hcmVhLWltYWdlLWFmdGVyLnBuZ1wiO1xyXG5pbXBvcnQgYmdJY29uQmVmb3JlIGZyb20gXCIuL2ltYWdlcy90YXNrLWFyZWEtaW1hZ2UucG5nXCI7XHJcblxyXG4vLyBjb25zdCBwcm9qZWN0c09iamVjdCA9IHt9O1xyXG5jb25zdCBwcm9qZWN0c0FycmF5ID0gW107XHJcbmNvbnN0IGNoZWNrVGFza0V4aXN0cyA9ICgpPT57XHJcbiAgICBjb25zdCB0YXNrc1NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpO1xyXG4gICAgY29uc3QgYmdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmctaW1hZ2VcIik7XHJcbiAgICBpZih0YXNrc1NlY3Rpb24uY2hpbGRFbGVtZW50Q291bnQgPiAxKXsvLyBjaGVjayBpZiB0aGVyZSBhcmUgYW55IHRhc2tcclxuICAgICAgICBiZ0ltYWdlLnNyYyA9IGJnSWNvbkFmdGVyOy8vIGNobmFnZXMgYmcgaW1hZ2VcclxuICAgIH1cclxuICAgIGVsc2UgaWYodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50ID09PSAxKXtcclxuICAgICAgICBiZ0ltYWdlLnNyYyA9IGJnSWNvbkJlZm9yZTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgVGFzayA9IGNsYXNzey8vIGNvbnN0cnVjdG9yIGZvciBjb2xsZWN0aW5nIG5ld1Rhc2sgaW5mb1xyXG4gICAgY29uc3RydWN0b3IocHJvamVjdCx0aXRsZSwgZGF0ZSwgdHlwZSwgc3RhdHVzKXtcclxuICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRkaW5nTmV3VGFzaygpey8vIGNyZWF0ZXMgYW5kIGFwcGVuZHMgbmV3IHRhc2sgXHJcbiAgICAgICAgY29uc3QgdGFza3NTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3VGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbmV3VGFza0Rpdi5jbGFzc0xpc3QuYWRkKFwidGFza1wiKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgICB0YXNrTmFtZS50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgdGFza0RhdGUudGV4dENvbnRlbnQgPSB0aGlzLmRhdGU7XHJcblxyXG4gICAgICAgIGNvbnN0IHRhc2tTdGF0dXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgICB0YXNrU3RhdHVzLnRleHRDb250ZW50ID0gdGhpcy50eXBlO1xyXG5cclxuICAgICAgICBjb25zdCB0YXNrQnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGFza0J1dHRvbnMuY2xhc3NMaXN0LmFkZChcInRhc2stb3B0aW9uXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBkb25lSWNvbiA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGRvbmVJY29uLnNyYyA9IGNpcmNsZTtcclxuXHJcbiAgICAgICAgY29uc3QgZGVsZXRlSWNvbiA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGRlbGV0ZUljb24uc3JjID0gY3Jvc3M7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuc3RhdHVzID09PSBcImNvbXBsZXRlXCIpe1xyXG4gICAgICAgICAgICBuZXdUYXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRhc2tzU2VjdGlvbi5hcHBlbmRDaGlsZChuZXdUYXNrRGl2KTtcclxuICAgICAgICBuZXdUYXNrRGl2LmFwcGVuZENoaWxkKHRhc2tOYW1lKTtcclxuICAgICAgICBuZXdUYXNrRGl2LmFwcGVuZENoaWxkKHRhc2tEYXRlKTtcclxuICAgICAgICBuZXdUYXNrRGl2LmFwcGVuZENoaWxkKHRhc2tTdGF0dXMpO1xyXG4gICAgICAgIG5ld1Rhc2tEaXYuYXBwZW5kQ2hpbGQodGFza0J1dHRvbnMpO1xyXG4gICAgICAgIHRhc2tCdXR0b25zLmFwcGVuZENoaWxkKGRvbmVJY29uKTtcclxuICAgICAgICB0YXNrQnV0dG9ucy5hcHBlbmRDaGlsZChkZWxldGVJY29uKTtcclxuICAgICAgICBjaGVja1Rhc2tFeGlzdHMoKTtcclxuXHJcbiAgICAgICAgZG9uZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFRhc2tUaXRsZSA9ICgoZG9uZUljb24ucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9MDsgaTxwcm9qZWN0c0FycmF5Lmxlbmd0aDtpKz0xKXsgLy8gY2huYWdlcyB0aGUgc3RhdHVzIG9mIHRoZSB0YXNrIFxyXG4gICAgICAgICAgICAgICAgaWYoY29tcGxldGVkVGFza1RpdGxlID09PSBwcm9qZWN0c0FycmF5W2ldLnRpdGxlKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihwcm9qZWN0c0FycmF5W2ldLnN0YXR1cyA9PT0gXCJjb21wbGV0ZVwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheVtpXS5zdGF0dXMgPSBcImluY29tcGxldGVcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByb2plY3RzQXJyYXlbaV0uc3RhdHVzID09PSBcImluY29tcGxldGVcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RzQXJyYXlbaV0uc3RhdHVzID0gXCJjb21wbGV0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKChkb25lSWNvbi5wYXJlbnROb2RlKS5wYXJlbnROb2RlKS5jbGFzc0xpc3QudG9nZ2xlKFwiY29tcGxldGVcIik7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RzQXJyYXkpOyAgXHJcblxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGRlbGV0ZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRUYXNrVGl0bGUgPSAoKGRlbGV0ZUljb24ucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8cHJvamVjdHNBcnJheS5sZW5ndGg7aSs9MSl7Ly8gcmVtb3ZlcyB0aGUgdGFzayBmcm9tIHRoZSBtYWluIGFycmF5XHJcbiAgICAgICAgICAgICAgICBpZihyZW1vdmVkVGFza1RpdGxlID09PSBwcm9qZWN0c0FycmF5W2ldLnRpdGxlKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpKTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0c0FycmF5LnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RzQXJyYXkpO1xyXG4gICAgICAgICAgICAoKGRlbGV0ZUljb24ucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIGNoZWNrVGFza0V4aXN0cygpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zdCBhZGROZXdUYXNrID0gKCk9PntcclxuICAgIGNvbnN0IHRhc2tGb3JtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1uYW1lXCIpO1xyXG4gICAgY29uc3QgdGFza0Zvcm1EYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWRhdGVcIik7XHJcbiAgICBjb25zdCB0YXNrRm9ybVR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tdHlwZVwiKTtcclxuICAgIGNvbnN0IHRhc2tQcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1saXN0XCIpLmNoaWxkcmVuWzBdLnRleHRDb250ZW50O1xyXG5cclxuICAgIC8vIGdldHMgdmFsdWUgZnJvbSB0aGUgZm9ybVxyXG4gICAgY29uc3QgdGFza0Zvcm1OYW1lVmFsdWUgPSB0YXNrRm9ybU5hbWUudmFsdWU7XHJcbiAgICBjb25zdCB0YXNrRm9ybURhdGVWYWx1ZSA9IHRhc2tGb3JtRGF0ZS52YWx1ZVxyXG4gICAgY29uc3QgdGFza0Zvcm1UeXBlVmFsdWUgPSB0YXNrRm9ybVR5cGUudmFsdWVcclxuICAgIGNvbnN0IHN0YXR1cyA9IFwiaW5jb21wbGV0ZVwiO1xyXG4gICAgY29uc3QgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrLWZvcm1cIik7XHJcbiAgICBjb25zdCBuZXdUYXNrID0gbmV3IFRhc2sodGFza1Byb2plY3ROYW1lICx0YXNrRm9ybU5hbWVWYWx1ZSwgdGFza0Zvcm1EYXRlVmFsdWUsIHRhc2tGb3JtVHlwZVZhbHVlLCBzdGF0dXMpO1xyXG4gICAgbmV3VGFzay5hZGRpbmdOZXdUYXNrKCk7Ly8gY2FsbGluZyBmdW5jdGlvblxyXG4gICAgcHJvamVjdHNBcnJheS5wdXNoKG5ld1Rhc2spO1xyXG4gICAgLy8gY29uc29sZS5sb2cobmV3VGFzayk7XHJcblxyXG4gICAgXHJcbiAgICAvLyBwcm9qZWN0c0FycmF5LnB1c2godGFza1RpdGxlLmNoaWxkcmVuWzBdLnRleHRDb250ZW50KTtcclxuICAgIC8vIGNvbnN0IHVuaXF1ZVByb2plY3RzID0gWy4uLm5ldyBTZXQocHJvamVjdHNBcnJheSldO1xyXG4gICAgLy8gcHJvamVjdHNPYmplY3QudGFzayA9IHVuaXF1ZVByb2plY3RzO1xyXG5cclxuICAgIC8vIHJlc2V0dGluZyBmb3JtIHZhbHVlXHJcbiAgICB0YXNrRm9ybU5hbWUudmFsdWUgPSBcIlwiO1xyXG4gICAgdGFza0Zvcm1EYXRlLnZhbHVlID0gbmV3IERhdGUoKS50b0pTT04oKS5zbGljZSgwLDEwKTtcclxuICAgIHRhc2tGb3JtVHlwZS52YWx1ZSA9IFwiTm9ybWFsXCI7XHJcbiAgICBhZGRUYXNrRm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkaW5nXCIpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNBcnJheSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0c09iamVjdCk7XHJcbn1cclxuXHJcbmNvbnN0IGFkZE5ld1Rhc2tFdmVudCA9ICgpPT57XHJcbiAgICBjb25zdCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFzay1idXR0b25cIik7XHJcbiAgICBjb25zdCBjYW5jZWxUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWwtdGFzay1idXR0b25cIik7XHJcbiAgICBjb25zdCBhZGRLZXlWZXJ0aWNhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmVydGljYWxcIik7XHJcbiAgICBjb25zdCBhZGRLZXlIb3Jpem9udG9sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob3Jpem9udG9sXCIpO1xyXG5cclxuICAgIGFkZFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKT0+e1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBhZGROZXdUYXNrKCk7XHJcbiAgICAgICAgYWRkS2V5VmVydGljYWwuY2xhc3NMaXN0LnJlbW92ZShcImFkZGluZ1wiKTtcclxuICAgICAgICBhZGRLZXlIb3Jpem9udG9sLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7Ly8gYW5pbWF0aW9uIGZvciBhZGQgaWNvbiBcclxuICAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNvbnRhaW5lclwiKTtcclxuICAgICAgICBtYWluQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgfSlcclxuXHJcbiAgICBjYW5jZWxUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSk9PntcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgYWRkS2V5VmVydGljYWwuY2xhc3NMaXN0LnJlbW92ZShcImFkZGluZ1wiKTtcclxuICAgICAgICBhZGRLZXlIb3Jpem9udG9sLmNsYXNzTGlzdC5yZW1vdmUoXCJhZGRpbmdcIik7Ly8gYW5pbWF0aW9uIGZvciBhZGQgaWNvbiBcclxuICAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNvbnRhaW5lclwiKTtcclxuICAgICAgICBtYWluQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgICAgICgoKGNhbmNlbFRhc2tCdXR0b24ucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkuY2xhc3NMaXN0LnJlbW92ZShcImFkZGluZ1wiKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0XHJcbmV4cG9ydCB7YWRkTmV3VGFza0V2ZW50LCBwcm9qZWN0c0FycmF5LCBUYXNrLCBjaGVja1Rhc2tFeGlzdHN9OyIsImltcG9ydCB0YXNrSWNvbiBmcm9tIFwiLi9pbWFnZXMvdGFza19GSUxMMF93Z2h0NDAwX0dSQUQwX29wc3o0OC5wbmdcIjtcclxuaW1wb3J0IGNyb3NzSWNvbiBmcm9tIFwiLi9pbWFnZXMvY3Jvc3MucG5nXCI7XHJcbmltcG9ydCB7IFRhc2ssIHByb2plY3RzQXJyYXksIGNoZWNrVGFza0V4aXN0cyB9IGZyb20gXCIuL3Rhc2tBZGRcIjtcclxuXHJcbmNvbnN0IGFkZE5ld1Byb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wcm9qZWN0XCIpO1xyXG5jb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1mb3JtXCIpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1idXR0b25cIik7XHJcbmNvbnN0IG5ld1Byb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdHNcIik7XHJcbmNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2xlLWJ1dHRvblwiKTtcclxuY29uc3QgdGFza3NTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuXHJcblxyXG5jb25zdCBzdGggPSAoKT0+e1xyXG4gICAgd2hpbGUodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50PjEpey8vIHJlbW92ZXMgdGhlIGN1cnJlbnQgcHJvamVjdHMgdGFza3MgZm9yIG5ldyBzZWxlY3RlZCBwcm9qZWN0XHJcbiAgICAgICAgdGFza3NTZWN0aW9uLmxhc3RDaGlsZC5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRhc2tQcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1saXN0XCIpLmNoaWxkcmVuWzBdLnRleHRDb250ZW50O1xyXG4gICAgZm9yKGxldCBpPTA7aTxwcm9qZWN0c0FycmF5Lmxlbmd0aDtpKz0xKXsvLyB0YXNrZXMgdmFsdWUgZnJvbSBhcnJheSBhbmQgYXBwZW5kcyB0aGUgc2VsZWNldGVkIHByb2plY3RzIHRhc2tcclxuICAgICAgICBpZih0YXNrUHJvamVjdE5hbWUgPT09IHByb2plY3RzQXJyYXlbaV0ucHJvamVjdCl7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgVGFzayhwcm9qZWN0c0FycmF5W2ldLnByb2plY3QscHJvamVjdHNBcnJheVtpXS50aXRsZSxcclxuICAgICAgICAgICAgICAgIHByb2plY3RzQXJyYXlbaV0uZGF0ZSxwcm9qZWN0c0FycmF5W2ldLnR5cGUsIHByb2plY3RzQXJyYXlbaV0uc3RhdHVzKTtcclxuICAgICAgICAgICAgbmV3VGFzay5hZGRpbmdOZXdUYXNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hlY2tUYXNrRXhpc3RzKCk7XHJcbn1cclxuXHJcbmNvbnN0IGFjY2Vzc1Byb2plY3RzID0gKCk9PnsgLy8gYWNjZXNzIG5hbWVzIG9mIHByb2plY3RzXHJcbiAgICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjcHJvamVjdFwiKTtcclxuICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1saXN0XCIpO1xyXG4gICAgcHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCk9PntcclxuICAgICAgICBwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgICAgICBpZihwcm9qZWN0VGl0bGUuY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudCA9PT0gcHJvamVjdC50ZXh0Q29udGVudCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBwcm9qZWN0VGl0bGUuY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudCA9IHByb2plY3QudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIHN0aCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuY29uc3QgYWRkUHJvamVjdCA9ICgpPT57Ly8gY3JlYXRlcyBuZXcgcHJvamVjdCBkaXYgYW5kIGFwcGVuZHMgYmVmb3JlIHRoZSBhZGQgYnV0dG9uXHJcbiAgICBjb25zdCBuZXdQcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdEFkZFBvcHVwXCIpO1xyXG5cclxuICAgIGNvbnN0IG5ld1Byb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgbmV3UHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKFwibmV3LXByb2plY3QtdGl0bGVcIilcclxuICAgIG5ld1Byb2plY3RzLmluc2VydEJlZm9yZShuZXdQcm9qZWN0RGl2LCBuZXdQcm9qZWN0cy5jaGlsZHJlbltuZXdQcm9qZWN0cy5jaGlsZEVsZW1lbnRDb3VudC0xXSk7XHJcblxyXG4gICAgY29uc3QgbmV3UHJvamVjdEltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICBuZXdQcm9qZWN0SW1hZ2Uuc3JjID0gdGFza0ljb247XHJcbiAgICBuZXdQcm9qZWN0RGl2LmFwcGVuZENoaWxkKG5ld1Byb2plY3RJbWFnZSk7XHJcblxyXG4gICAgY29uc3QgbmV3UHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBuZXdQcm9qZWN0QnV0dG9uLmlkID0gXCJwcm9qZWN0XCI7XHJcbiAgICBuZXdQcm9qZWN0QnV0dG9uLnRleHRDb250ZW50ID0gbmV3UHJvamVjdE5hbWUudmFsdWU7XHJcbiAgICBuZXdQcm9qZWN0RGl2LmFwcGVuZENoaWxkKG5ld1Byb2plY3RCdXR0b24pO1xyXG5cclxuICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1saXN0XCIpO1xyXG4gICAgcHJvamVjdFRpdGxlLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQgPSBuZXdQcm9qZWN0TmFtZS52YWx1ZTtcclxuICAgIHN0aCgpO1xyXG5cclxuICAgIG5ld1Byb2plY3ROYW1lLnZhbHVlPSBcIlwiO1xyXG4gICAgcHJvamVjdEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcblxyXG4gICAgY29uc3QgY3Jvc3NJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgY3Jvc3NJbWFnZS5zcmMgPSBjcm9zc0ljb247XHJcbiAgICBuZXdQcm9qZWN0RGl2LmFwcGVuZENoaWxkKGNyb3NzSW1hZ2UpO1xyXG5cclxuICAgIGNyb3NzSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgY29uc3QgZGVsZXRlZFByb2plY3ROYW1lID0gKGNyb3NzSW1hZ2UucGFyZW50Tm9kZSkuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgaWYodGFza3NTZWN0aW9uLmNoaWxkRWxlbWVudENvdW50ID09PSAxKXtcclxuICAgICAgICAgICAgKGNyb3NzSW1hZ2UucGFyZW50Tm9kZSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHByb2plY3RUaXRsZS5jaGlsZE5vZGVzWzFdLnRleHRDb250ZW50ID0gXCJDYXN1YWxcIjtcclxuICAgICAgICAgICAgc3RoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8PXByb2plY3RzQXJyYXkubGVuZ3RoO2krPTEpey8vIHdoZW4gcHJvamVjdCBpcyBkZWxldGVkIHRoZSBwcm9qZWN0J3MgYWxsIHRhc2sgZ2V0cyBkZWxldGVkXHJcbiAgICAgICAgICAgICAgICBpZihkZWxldGVkUHJvamVjdE5hbWUgPT09IHByb2plY3RzQXJyYXlbaV0ucHJvamVjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheS5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAoY3Jvc3NJbWFnZS5wYXJlbnROb2RlKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgcHJvamVjdFRpdGxlLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQgPSBcIkNhc3VhbFwiO1xyXG4gICAgICAgICAgICBzdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgY29uc29sZS5sb2cocHJvamVjdHNBcnJheSlcclxuICAgIGFjY2Vzc1Byb2plY3RzKCk7XHJcbn1cclxuXHJcbmNvbnN0IHByb2plY3RBZGRpbmdFdmVudHMgPSgpPT57XHJcbiAgICBhZGROZXdQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgIHByb2plY3RGb3JtLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpOy8vIGZvcm0gZm9yIG5ldyBwcm9qZWN0IFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGFkZFByb2plY3QoKTsvLyBzdWJtaXRzIGZvcm1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpPT57XHJcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RBZGRQb3B1cFwiKVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBwcm9qZWN0Rm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcclxuICAgICAgICBuZXdQcm9qZWN0TmFtZS52YWx1ZT0gXCJcIjsgLy8gY2FuY2VscyB0aGUgZm9ybSBleGVjdXRpb25cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQge2FjY2Vzc1Byb2plY3RzLCBwcm9qZWN0QWRkaW5nRXZlbnRzfVxyXG5leHBvcnQge3Byb2plY3RGb3JtLCBuZXdQcm9qZWN0c307IiwiaW1wb3J0IHtwcm9qZWN0Rm9ybSxuZXdQcm9qZWN0c30gZnJvbSBcIi4vcHJvamVjdFwiO1xyXG5cclxuY29uc3QgRE9NYW5pbWF0aW9uID0gKCk9PntcclxuICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVcIik7XHJcbiAgICBjb25zdCBuYXZCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpO1xyXG4gICAgY29uc3QgdGFza0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbGlzdFwiKTtcclxuICAgIGNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKTtcclxuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tcIik7XHJcbiAgICBjb25zdCBhZGRLZXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrXCIpXHJcbiAgICBjb25zdCBhZGRLZXlWZXJ0aWNhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmVydGljYWxcIik7XHJcbiAgICBjb25zdCBhZGRLZXlIb3Jpem9udG9sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob3Jpem9udG9sXCIpO1xyXG4gICAgY29uc3QgYWRkVGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrLWZvcm1cIik7XHJcblxyXG4gICAgdGFza0FyZWEuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQgPSBcIkNhc3VhbFwiO1xyXG4gICAgbWVudS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PnsgLy8gZm9yIG1lbnUgYmFyIHZpc2libGVcclxuICAgICAgICBpZihuZXdQcm9qZWN0cy5jaGlsZEVsZW1lbnRDb3VudCA+Mil7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3REaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5ldy1wcm9qZWN0LXRpdGxlXCIpO1xyXG4gICAgICAgICAgICBuZXdQcm9qZWN0RGl2LmZvckVhY2goKHgpPT57XHJcbiAgICAgICAgICAgICAgICB4LmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpOy8vIGZvciByZW1vdmluZyB0aGUgbmV3UHJvamVjdHNGb3JtIHdpdGggbWVudSBjbG9zaW5nXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImNoYW5nZVwiKTtcclxuICAgICAgICBuYXZCYXIuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7ICAgIFxyXG4gICAgICAgIHRhc2tBcmVhLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG4gICAgICAgIGFkZFRhc2tGb3JtLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG4gICAgICAgIHByb2plY3RGb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xyXG4gICAgICAgIHRhc2tzLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xyXG4gICAgICAgIHRhc2suY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxuXHJcbiAgICBhZGRLZXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57IC8vIGZvciBhZGRpbmcgdGFzayBcclxuICAgICAgICBhZGRLZXlWZXJ0aWNhbC5jbGFzc0xpc3QudG9nZ2xlKFwiYWRkaW5nXCIpO1xyXG4gICAgICAgIGFkZEtleUhvcml6b250b2wuY2xhc3NMaXN0LnRvZ2dsZShcImFkZGluZ1wiKTsvLyBhbmltYXRpb24gZm9yIGFkZCBpY29uXHJcbiAgICAgICAgYWRkVGFza0Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImFkZGluZ1wiKTsvLyBtYWtlcyB0YXNrIGZvcm0gdmlzaWJsZVxyXG5cclxuICAgICAgICAoKG1lbnUucGFyZW50Tm9kZSkucGFyZW50Tm9kZSkuY2xhc3NMaXN0LmFkZChcInNob3dcIilcclxuXHJcbiAgICAgICAgLy8gd2hlbiBmb3JtIG9wZW5zIGRhdGUgaXMgc2V0IGluaXRpYWxseSB0byB0b2RheXMgZGF0ZVxyXG4gICAgICAgIGNvbnN0IHRhc2tGb3JtRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1kYXRlXCIpO1xyXG4gICAgICAgIHRhc2tGb3JtRGF0ZS52YWx1ZSA9IG5ldyBEYXRlKCkudG9KU09OKCkuc2xpY2UoMCwxMCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRE9NYW5pbWF0aW9uOyIsImltcG9ydCBET01hbmltYXRpb24gZnJvbSBcIi4vbW9kdWxlcy9pbml0aWFsRE9NXCI7XHJcbmltcG9ydCB7IGFjY2Vzc1Byb2plY3RzLCBwcm9qZWN0QWRkaW5nRXZlbnRzIH0gZnJvbSBcIi4vbW9kdWxlcy9wcm9qZWN0XCI7XHJcbmltcG9ydCB7IGFkZE5ld1Rhc2tFdmVudCB9IGZyb20gXCIuL21vZHVsZXMvdGFza0FkZFwiO1xyXG5cclxuRE9NYW5pbWF0aW9uKCk7XHJcbmFjY2Vzc1Byb2plY3RzKCk7XHJcbnByb2plY3RBZGRpbmdFdmVudHMoKTtcclxuYWRkTmV3VGFza0V2ZW50KCk7XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsInByb2plY3RzQXJyYXkiLCJjaGVja1Rhc2tFeGlzdHMiLCJ0YXNrc1NlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwiYmdJbWFnZSIsImNoaWxkRWxlbWVudENvdW50IiwiVGFzayIsImNvbnN0cnVjdG9yIiwicHJvamVjdCIsInRpdGxlIiwiZGF0ZSIsInR5cGUiLCJzdGF0dXMiLCJhZGRpbmdOZXdUYXNrIiwibmV3VGFza0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YXNrTmFtZSIsInRleHRDb250ZW50IiwidGFza0RhdGUiLCJ0YXNrU3RhdHVzIiwidGFza0J1dHRvbnMiLCJkb25lSWNvbiIsIkltYWdlIiwiZGVsZXRlSWNvbiIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlZFRhc2tUaXRsZSIsImNoaWxkcmVuIiwiaSIsInRvZ2dsZSIsInJlbW92ZWRUYXNrVGl0bGUiLCJzcGxpY2UiLCJyZW1vdmUiLCJhZGROZXdQcm9qZWN0IiwicHJvamVjdEZvcm0iLCJhZGRCdXR0b24iLCJuZXdQcm9qZWN0cyIsImNhbmNlbEJ1dHRvbiIsInN0aCIsImxhc3RDaGlsZCIsInRhc2tQcm9qZWN0TmFtZSIsImFjY2Vzc1Byb2plY3RzIiwicHJvamVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdFRpdGxlIiwiZm9yRWFjaCIsImNoaWxkTm9kZXMiLCJtZW51IiwibmF2QmFyIiwidGFza0FyZWEiLCJ0YXNrcyIsInRhc2siLCJhZGRLZXkiLCJhZGRLZXlWZXJ0aWNhbCIsImFkZEtleUhvcml6b250b2wiLCJhZGRUYXNrRm9ybSIsIngiLCJ2YWx1ZSIsIkRhdGUiLCJ0b0pTT04iLCJzbGljZSIsInByZXZlbnREZWZhdWx0IiwibmV3UHJvamVjdE5hbWUiLCJuZXdQcm9qZWN0RGl2IiwiaW5zZXJ0QmVmb3JlIiwibmV3UHJvamVjdEltYWdlIiwibmV3UHJvamVjdEJ1dHRvbiIsImlkIiwiY3Jvc3NJbWFnZSIsImRlbGV0ZWRQcm9qZWN0TmFtZSIsImNvbnNvbGUiLCJsb2ciLCJhZGRQcm9qZWN0IiwiYWRkVGFza0J1dHRvbiIsImNhbmNlbFRhc2tCdXR0b24iLCJ0YXNrRm9ybU5hbWUiLCJ0YXNrRm9ybURhdGUiLCJ0YXNrRm9ybVR5cGUiLCJ0YXNrRm9ybU5hbWVWYWx1ZSIsInRhc2tGb3JtRGF0ZVZhbHVlIiwidGFza0Zvcm1UeXBlVmFsdWUiLCJuZXdUYXNrIiwicHVzaCIsImFkZE5ld1Rhc2siLCJhZGROZXdUYXNrRXZlbnQiXSwic291cmNlUm9vdCI6IiJ9